{"ast":null,"code":"import _initializerDefineProperty from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";import _classCallCheck from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _applyDecoratedDescriptor from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";import _initializerWarningHelper from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";var _dec,_dec2,_dec3,_dec4,_class,_descriptor,_descriptor2,_descriptor3,_descriptor4;import{b2BodyType}from\"box2d.ts\";import{System,Inject}from\"flat-ecs\";import{InputEvent}from\"gdxts\";import{Constants}from\"../Constants\";export var inputHandlerSystem=(_dec=Inject(\"inputHandler\"),_dec2=Inject(\"originPosition\"),_dec3=Inject(\"slingPos\"),_dec4=Inject(\"bird\"),(_class=/*#__PURE__*/function(_System){_inherits(inputHandlerSystem,_System);var _super=_createSuper(inputHandlerSystem);function inputHandlerSystem(){var _this;_classCallCheck(this,inputHandlerSystem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_initializerDefineProperty(_this,\"inputHandler\",_descriptor,_assertThisInitialized(_this));_initializerDefineProperty(_this,\"originPosition\",_descriptor2,_assertThisInitialized(_this));_initializerDefineProperty(_this,\"slingPos\",_descriptor3,_assertThisInitialized(_this));_initializerDefineProperty(_this,\"bird\",_descriptor4,_assertThisInitialized(_this));return _this;}_createClass(inputHandlerSystem,[{key:\"initialized\",value:function initialized(){var _this2=this;this.inputHandler.addEventListener(InputEvent.TouchMove,function(){if(_this2.inputHandler.isTouched()){_this2.slingPos.setVector(_this2.inputHandler.getTouchedWorldCoord());}});this.inputHandler.addEventListener(InputEvent.TouchEnd,function(){_this2.bird.SetType(b2BodyType.b2_dynamicBody);_this2.bird.ApplyLinearImpulseToCenter({x:7*(_this2.originPosition.x-_this2.slingPos.x)/Constants.METER_TO_WORLD,y:7*(_this2.originPosition.y-_this2.slingPos.y)/Constants.METER_TO_WORLD},true);});}},{key:\"process\",value:function process(){}}]);return inputHandlerSystem;}(System),(_descriptor=_applyDecoratedDescriptor(_class.prototype,\"inputHandler\",[_dec],{configurable:true,enumerable:true,writable:true,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class.prototype,\"originPosition\",[_dec2],{configurable:true,enumerable:true,writable:true,initializer:null}),_descriptor3=_applyDecoratedDescriptor(_class.prototype,\"slingPos\",[_dec3],{configurable:true,enumerable:true,writable:true,initializer:null}),_descriptor4=_applyDecoratedDescriptor(_class.prototype,\"bird\",[_dec4],{configurable:true,enumerable:true,writable:true,initializer:null})),_class));","map":{"version":3,"names":["b2BodyType","System","Inject","InputEvent","Constants","inputHandlerSystem","inputHandler","addEventListener","TouchMove","isTouched","slingPos","setVector","getTouchedWorldCoord","TouchEnd","bird","SetType","b2_dynamicBody","ApplyLinearImpulseToCenter","x","originPosition","METER_TO_WORLD","y"],"sources":["D:/projects/test-game/src/system/inputHandleSystem.ts"],"sourcesContent":["import { b2Body, b2BodyType } from \"box2d.ts\";\r\nimport { System, Inject } from \"flat-ecs\";\r\nimport { InputEvent, Vector2, ViewportInputHandler } from \"gdxts\";\r\nimport { Constants } from \"../Constants\";\r\n\r\nexport class inputHandlerSystem extends System {\r\n  @Inject(\"inputHandler\") inputHandler: ViewportInputHandler;\r\n  @Inject(\"originPosition\") originPosition: Vector2;\r\n  @Inject(\"slingPos\") slingPos: Vector2;\r\n  @Inject(\"bird\") bird: b2Body;\r\n\r\n  initialized(): void {\r\n    this.inputHandler.addEventListener(InputEvent.TouchMove, () => {\r\n      if (this.inputHandler.isTouched()) {\r\n        this.slingPos.setVector(this.inputHandler.getTouchedWorldCoord());\r\n      }\r\n    });\r\n    this.inputHandler.addEventListener(InputEvent.TouchEnd, () => {\r\n      this.bird.SetType(b2BodyType.b2_dynamicBody);\r\n      this.bird.ApplyLinearImpulseToCenter(\r\n        {\r\n          x:\r\n            (7 * (this.originPosition.x - this.slingPos.x)) /\r\n            Constants.METER_TO_WORLD,\r\n          y:\r\n            (7 * (this.originPosition.y - this.slingPos.y)) /\r\n            Constants.METER_TO_WORLD,\r\n        },\r\n        true\r\n      );\r\n    });\r\n  }\r\n\r\n  process(): void {}\r\n}\r\n"],"mappings":"i/BAAA,OAAiBA,UAAjB,KAAmC,UAAnC,CACA,OAASC,MAAT,CAAiBC,MAAjB,KAA+B,UAA/B,CACA,OAASC,UAAT,KAA0D,OAA1D,CACA,OAASC,SAAT,KAA0B,cAA1B,CAEA,UAAaC,mBAAb,OACGH,MAAM,CAAC,cAAD,CADT,OAEGA,MAAM,CAAC,gBAAD,CAFT,OAGGA,MAAM,CAAC,UAAD,CAHT,OAIGA,MAAM,CAAC,MAAD,CAJT,oxBAME,sBAAoB,iBAClB,KAAKI,YAAL,CAAkBC,gBAAlB,CAAmCJ,UAAU,CAACK,SAA9C,CAAyD,UAAM,CAC7D,GAAI,MAAI,CAACF,YAAL,CAAkBG,SAAlB,EAAJ,CAAmC,CACjC,MAAI,CAACC,QAAL,CAAcC,SAAd,CAAwB,MAAI,CAACL,YAAL,CAAkBM,oBAAlB,EAAxB,EACD,CACF,CAJD,EAKA,KAAKN,YAAL,CAAkBC,gBAAlB,CAAmCJ,UAAU,CAACU,QAA9C,CAAwD,UAAM,CAC5D,MAAI,CAACC,IAAL,CAAUC,OAAV,CAAkBf,UAAU,CAACgB,cAA7B,EACA,MAAI,CAACF,IAAL,CAAUG,0BAAV,CACE,CACEC,CAAC,CACE,GAAK,MAAI,CAACC,cAAL,CAAoBD,CAApB,CAAwB,MAAI,CAACR,QAAL,CAAcQ,CAA3C,CAAD,CACAd,SAAS,CAACgB,cAHd,CAIEC,CAAC,CACE,GAAK,MAAI,CAACF,cAAL,CAAoBE,CAApB,CAAwB,MAAI,CAACX,QAAL,CAAcW,CAA3C,CAAD,CACAjB,SAAS,CAACgB,cANd,CADF,CASE,IATF,EAWD,CAbD,EAcD,CA1BH,uBA4BE,kBAAgB,CAAE,CA5BpB,gCAAwCnB,MAAxC"},"metadata":{},"sourceType":"module"}