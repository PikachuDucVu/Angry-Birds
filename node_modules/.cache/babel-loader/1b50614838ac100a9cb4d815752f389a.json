{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"D:/projects/test-game/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\n\nvar _classCallCheck = require(\"D:/projects/test-game/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"D:/projects/test-game/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Animation = exports.PlayMode = void 0;\nvar PlayMode;\n\n(function (PlayMode) {\n  PlayMode[PlayMode[\"NORMAL\"] = 0] = \"NORMAL\";\n  PlayMode[PlayMode[\"LOOP\"] = 1] = \"LOOP\";\n  PlayMode[PlayMode[\"LOOP_PINGPONG\"] = 2] = \"LOOP_PINGPONG\";\n  PlayMode[PlayMode[\"REVERSED\"] = 3] = \"REVERSED\";\n  PlayMode[PlayMode[\"LOOP_REVERSED\"] = 4] = \"LOOP_REVERSED\";\n})(PlayMode = exports.PlayMode || (exports.PlayMode = {}));\n\nvar Animation = /*#__PURE__*/function () {\n  function Animation(keyFrames, frameDurations) {\n    _classCallCheck(this, Animation);\n\n    this.totalDuration = 0;\n    this.keyFrames = keyFrames;\n\n    if (!Array.isArray(frameDurations)) {\n      frameDurations = [frameDurations];\n    }\n\n    var lastDuration = frameDurations[frameDurations.length - 1] || 0;\n\n    while (frameDurations.length < keyFrames.length) {\n      frameDurations.push(lastDuration);\n    }\n\n    var _iterator = _createForOfIteratorHelper(frameDurations),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var fD = _step.value;\n        this.totalDuration += fD;\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    this.frameDurations = frameDurations;\n  }\n\n  _createClass(Animation, [{\n    key: \"getFrameNumber\",\n    value: function getFrameNumber(stateTimeRemainder) {\n      var reverse = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var frameDurations = this.frameDurations;\n      var fN = reverse ? frameDurations.length - 1 : 0;\n\n      while (true) {\n        stateTimeRemainder -= frameDurations[fN];\n\n        if (stateTimeRemainder < 0) {\n          break;\n        }\n\n        reverse ? fN-- : fN++;\n      }\n\n      return fN;\n    }\n  }, {\n    key: \"getKeyFrame\",\n    value: function getKeyFrame(stateTime, mode) {\n      var keyFrames = this.keyFrames,\n          frameDurations = this.frameDurations,\n          totalDuration = this.totalDuration;\n      var runIndex = Math.floor(stateTime / totalDuration);\n      var stateTimeRemainder = stateTime % totalDuration;\n      var frameNumber = 0;\n\n      switch (mode) {\n        case PlayMode.NORMAL:\n          frameNumber = runIndex === 0 ? this.getFrameNumber(stateTimeRemainder) : frameDurations.length - 1;\n          break;\n\n        case PlayMode.LOOP:\n          frameNumber = this.getFrameNumber(stateTimeRemainder);\n          break;\n\n        case PlayMode.LOOP_PINGPONG:\n          frameNumber = this.getFrameNumber(stateTimeRemainder, runIndex % 2 === 1);\n          break;\n\n        case PlayMode.REVERSED:\n          frameNumber = runIndex === 0 ? this.getFrameNumber(stateTimeRemainder, true) : 0;\n          break;\n\n        case PlayMode.LOOP_REVERSED:\n          frameNumber = this.getFrameNumber(stateTimeRemainder, true);\n          break;\n\n        default:\n      }\n\n      return keyFrames[frameNumber];\n    }\n  }]);\n\n  return Animation;\n}();\n\nexports.Animation = Animation;","map":{"version":3,"names":["Object","defineProperty","exports","value","Animation","PlayMode","keyFrames","frameDurations","totalDuration","Array","isArray","lastDuration","length","push","fD","stateTimeRemainder","reverse","fN","stateTime","mode","runIndex","Math","floor","frameNumber","NORMAL","getFrameNumber","LOOP","LOOP_PINGPONG","REVERSED","LOOP_REVERSED"],"sources":["D:/projects/test-game/node_modules/gdxts/dist/lib/Animation.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Animation = exports.PlayMode = void 0;\r\nvar PlayMode;\r\n(function (PlayMode) {\r\n    PlayMode[PlayMode[\"NORMAL\"] = 0] = \"NORMAL\";\r\n    PlayMode[PlayMode[\"LOOP\"] = 1] = \"LOOP\";\r\n    PlayMode[PlayMode[\"LOOP_PINGPONG\"] = 2] = \"LOOP_PINGPONG\";\r\n    PlayMode[PlayMode[\"REVERSED\"] = 3] = \"REVERSED\";\r\n    PlayMode[PlayMode[\"LOOP_REVERSED\"] = 4] = \"LOOP_REVERSED\";\r\n})(PlayMode = exports.PlayMode || (exports.PlayMode = {}));\r\nclass Animation {\r\n    constructor(keyFrames, frameDurations) {\r\n        this.totalDuration = 0;\r\n        this.keyFrames = keyFrames;\r\n        if (!Array.isArray(frameDurations)) {\r\n            frameDurations = [frameDurations];\r\n        }\r\n        const lastDuration = frameDurations[frameDurations.length - 1] || 0;\r\n        while (frameDurations.length < keyFrames.length) {\r\n            frameDurations.push(lastDuration);\r\n        }\r\n        for (let fD of frameDurations) {\r\n            this.totalDuration += fD;\r\n        }\r\n        this.frameDurations = frameDurations;\r\n    }\r\n    getFrameNumber(stateTimeRemainder, reverse = false) {\r\n        const { frameDurations } = this;\r\n        let fN = reverse ? frameDurations.length - 1 : 0;\r\n        while (true) {\r\n            stateTimeRemainder -= frameDurations[fN];\r\n            if (stateTimeRemainder < 0) {\r\n                break;\r\n            }\r\n            reverse ? fN-- : fN++;\r\n        }\r\n        return fN;\r\n    }\r\n    getKeyFrame(stateTime, mode) {\r\n        const { keyFrames, frameDurations, totalDuration } = this;\r\n        const runIndex = Math.floor(stateTime / totalDuration);\r\n        const stateTimeRemainder = stateTime % totalDuration;\r\n        let frameNumber = 0;\r\n        switch (mode) {\r\n            case PlayMode.NORMAL:\r\n                frameNumber = runIndex === 0 ? this.getFrameNumber(stateTimeRemainder) : frameDurations.length - 1;\r\n                break;\r\n            case PlayMode.LOOP:\r\n                frameNumber = this.getFrameNumber(stateTimeRemainder);\r\n                break;\r\n            case PlayMode.LOOP_PINGPONG:\r\n                frameNumber = this.getFrameNumber(stateTimeRemainder, runIndex % 2 === 1);\r\n                break;\r\n            case PlayMode.REVERSED:\r\n                frameNumber = runIndex === 0 ? this.getFrameNumber(stateTimeRemainder, true) : 0;\r\n                break;\r\n            case PlayMode.LOOP_REVERSED:\r\n                frameNumber = this.getFrameNumber(stateTimeRemainder, true);\r\n                break;\r\n            default:\r\n        }\r\n        return keyFrames[frameNumber];\r\n    }\r\n}\r\nexports.Animation = Animation;\r\n"],"mappings":"AAAA;;;;;;;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,SAAR,GAAoBF,OAAO,CAACG,QAAR,GAAmB,KAAK,CAA5C;AACA,IAAIA,QAAJ;;AACA,CAAC,UAAUA,QAAV,EAAoB;EACjBA,QAAQ,CAACA,QAAQ,CAAC,QAAD,CAAR,GAAqB,CAAtB,CAAR,GAAmC,QAAnC;EACAA,QAAQ,CAACA,QAAQ,CAAC,MAAD,CAAR,GAAmB,CAApB,CAAR,GAAiC,MAAjC;EACAA,QAAQ,CAACA,QAAQ,CAAC,eAAD,CAAR,GAA4B,CAA7B,CAAR,GAA0C,eAA1C;EACAA,QAAQ,CAACA,QAAQ,CAAC,UAAD,CAAR,GAAuB,CAAxB,CAAR,GAAqC,UAArC;EACAA,QAAQ,CAACA,QAAQ,CAAC,eAAD,CAAR,GAA4B,CAA7B,CAAR,GAA0C,eAA1C;AACH,CAND,EAMGA,QAAQ,GAAGH,OAAO,CAACG,QAAR,KAAqBH,OAAO,CAACG,QAAR,GAAmB,EAAxC,CANd;;IAOMD,S;EACF,mBAAYE,SAAZ,EAAuBC,cAAvB,EAAuC;IAAA;;IACnC,KAAKC,aAAL,GAAqB,CAArB;IACA,KAAKF,SAAL,GAAiBA,SAAjB;;IACA,IAAI,CAACG,KAAK,CAACC,OAAN,CAAcH,cAAd,CAAL,EAAoC;MAChCA,cAAc,GAAG,CAACA,cAAD,CAAjB;IACH;;IACD,IAAMI,YAAY,GAAGJ,cAAc,CAACA,cAAc,CAACK,MAAf,GAAwB,CAAzB,CAAd,IAA6C,CAAlE;;IACA,OAAOL,cAAc,CAACK,MAAf,GAAwBN,SAAS,CAACM,MAAzC,EAAiD;MAC7CL,cAAc,CAACM,IAAf,CAAoBF,YAApB;IACH;;IATkC,2CAUpBJ,cAVoB;IAAA;;IAAA;MAUnC,oDAA+B;QAAA,IAAtBO,EAAsB;QAC3B,KAAKN,aAAL,IAAsBM,EAAtB;MACH;IAZkC;MAAA;IAAA;MAAA;IAAA;;IAanC,KAAKP,cAAL,GAAsBA,cAAtB;EACH;;;;WACD,wBAAeQ,kBAAf,EAAoD;MAAA,IAAjBC,OAAiB,uEAAP,KAAO;MAChD,IAAQT,cAAR,GAA2B,IAA3B,CAAQA,cAAR;MACA,IAAIU,EAAE,GAAGD,OAAO,GAAGT,cAAc,CAACK,MAAf,GAAwB,CAA3B,GAA+B,CAA/C;;MACA,OAAO,IAAP,EAAa;QACTG,kBAAkB,IAAIR,cAAc,CAACU,EAAD,CAApC;;QACA,IAAIF,kBAAkB,GAAG,CAAzB,EAA4B;UACxB;QACH;;QACDC,OAAO,GAAGC,EAAE,EAAL,GAAUA,EAAE,EAAnB;MACH;;MACD,OAAOA,EAAP;IACH;;;WACD,qBAAYC,SAAZ,EAAuBC,IAAvB,EAA6B;MACzB,IAAQb,SAAR,GAAqD,IAArD,CAAQA,SAAR;MAAA,IAAmBC,cAAnB,GAAqD,IAArD,CAAmBA,cAAnB;MAAA,IAAmCC,aAAnC,GAAqD,IAArD,CAAmCA,aAAnC;MACA,IAAMY,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWJ,SAAS,GAAGV,aAAvB,CAAjB;MACA,IAAMO,kBAAkB,GAAGG,SAAS,GAAGV,aAAvC;MACA,IAAIe,WAAW,GAAG,CAAlB;;MACA,QAAQJ,IAAR;QACI,KAAKd,QAAQ,CAACmB,MAAd;UACID,WAAW,GAAGH,QAAQ,KAAK,CAAb,GAAiB,KAAKK,cAAL,CAAoBV,kBAApB,CAAjB,GAA2DR,cAAc,CAACK,MAAf,GAAwB,CAAjG;UACA;;QACJ,KAAKP,QAAQ,CAACqB,IAAd;UACIH,WAAW,GAAG,KAAKE,cAAL,CAAoBV,kBAApB,CAAd;UACA;;QACJ,KAAKV,QAAQ,CAACsB,aAAd;UACIJ,WAAW,GAAG,KAAKE,cAAL,CAAoBV,kBAApB,EAAwCK,QAAQ,GAAG,CAAX,KAAiB,CAAzD,CAAd;UACA;;QACJ,KAAKf,QAAQ,CAACuB,QAAd;UACIL,WAAW,GAAGH,QAAQ,KAAK,CAAb,GAAiB,KAAKK,cAAL,CAAoBV,kBAApB,EAAwC,IAAxC,CAAjB,GAAiE,CAA/E;UACA;;QACJ,KAAKV,QAAQ,CAACwB,aAAd;UACIN,WAAW,GAAG,KAAKE,cAAL,CAAoBV,kBAApB,EAAwC,IAAxC,CAAd;UACA;;QACJ;MAhBJ;;MAkBA,OAAOT,SAAS,CAACiB,WAAD,CAAhB;IACH;;;;;;AAELrB,OAAO,CAACE,SAAR,GAAoBA,SAApB"},"metadata":{},"sourceType":"script"}