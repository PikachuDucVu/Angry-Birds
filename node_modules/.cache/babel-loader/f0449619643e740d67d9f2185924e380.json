{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"D:/projects/test-game/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"D:/projects/test-game/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ShapeRenderer = exports.ShapeType = void 0;\n\nvar Mesh_1 = require(\"./Mesh\");\n\nvar Shader_1 = require(\"./Shader\");\n\nvar Utils_1 = require(\"./Utils\");\n\nvar Vector2_1 = require(\"./Vector2\");\n\nvar WebGL_1 = require(\"./WebGL\");\n\nvar ShapeType;\n\n(function (ShapeType) {\n  ShapeType[ShapeType[\"Point\"] = 0] = \"Point\";\n  ShapeType[ShapeType[\"Line\"] = 1] = \"Line\";\n  ShapeType[ShapeType[\"Filled\"] = 4] = \"Filled\";\n})(ShapeType = exports.ShapeType || (exports.ShapeType = {}));\n\nvar ShapeRenderer = /*#__PURE__*/function () {\n  function ShapeRenderer(context) {\n    var maxVertices = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10920;\n\n    _classCallCheck(this, ShapeRenderer);\n\n    this.isDrawing = false;\n    this.shapeType = ShapeType.Filled;\n    this.color = new Utils_1.Color(1, 1, 1, 1);\n    this.vertexIndex = 0;\n    this.tmp = new Vector2_1.Vector2();\n    this.projectionValues = new Float32Array(16);\n    if (maxVertices > 10920) throw new Error(\"Can't have more than 10920 triangles per batch: \" + maxVertices);\n    this.context = context instanceof WebGL_1.ManagedWebGLRenderingContext ? context : new WebGL_1.ManagedWebGLRenderingContext(context);\n    this.mesh = new Mesh_1.Mesh(context, [new Mesh_1.Position2Attribute(), new Mesh_1.ColorAttribute()], maxVertices, 0);\n    var gl = this.context.gl;\n    this.srcColorBlend = gl.SRC_ALPHA;\n    this.srcAlphaBlend = gl.ONE;\n    this.dstBlend = gl.ONE_MINUS_SRC_ALPHA;\n    this.shader = Shader_1.Shader.newColored(gl);\n  }\n\n  _createClass(ShapeRenderer, [{\n    key: \"setProjection\",\n    value: function setProjection(projectionValues) {\n      this.projectionValues = projectionValues;\n    }\n  }, {\n    key: \"begin\",\n    value: function begin() {\n      if (this.isDrawing) throw new Error('ShapeRenderer.begin() has already been called');\n      this.vertexIndex = 0;\n      this.isDrawing = true;\n      this.shader.bind();\n      this.shader.setUniform4x4f(Shader_1.Shader.MVP_MATRIX, this.projectionValues);\n      var gl = this.context.gl;\n      gl.enable(gl.BLEND);\n      gl.blendFuncSeparate(this.srcColorBlend, this.dstBlend, this.srcAlphaBlend, this.dstBlend);\n    }\n  }, {\n    key: \"setBlendMode\",\n    value: function setBlendMode(srcColorBlend, srcAlphaBlend, dstBlend) {\n      this.srcColorBlend = srcColorBlend;\n      this.srcAlphaBlend = srcAlphaBlend;\n      this.dstBlend = dstBlend;\n\n      if (this.isDrawing) {\n        this.flush();\n        var gl = this.context.gl;\n        gl.blendFuncSeparate(srcColorBlend, dstBlend, srcAlphaBlend, dstBlend);\n      }\n    }\n  }, {\n    key: \"setColor\",\n    value: function setColor(color) {\n      this.color.setFromColor(color);\n    }\n  }, {\n    key: \"setColorWith\",\n    value: function setColorWith(r, g, b, a) {\n      this.color.set(r, g, b, a);\n    }\n  }, {\n    key: \"point\",\n    value: function point(x, y) {\n      var color = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      this.check(ShapeType.Point, 1);\n      if (color === null) color = this.color;\n      this.vertex(x, y, color);\n    }\n  }, {\n    key: \"line\",\n    value: function line(x, y, x2, y2) {\n      var color = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n      this.check(ShapeType.Line, 2);\n      if (color === null) color = this.color;\n      this.vertex(x, y, color);\n      this.vertex(x2, y2, color);\n    }\n  }, {\n    key: \"triangle\",\n    value: function triangle(filled, x, y, x2, y2, x3, y3) {\n      var color = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n      var color2 = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;\n      var color3 = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : null;\n      this.check(filled ? ShapeType.Filled : ShapeType.Line, 3);\n      if (color === null) color = this.color;\n      if (color2 === null) color2 = this.color;\n      if (color3 === null) color3 = this.color;\n\n      if (filled) {\n        this.vertex(x, y, color);\n        this.vertex(x2, y2, color2);\n        this.vertex(x3, y3, color3);\n      } else {\n        this.vertex(x, y, color);\n        this.vertex(x2, y2, color2);\n        this.vertex(x2, y2, color);\n        this.vertex(x3, y3, color2);\n        this.vertex(x3, y3, color);\n        this.vertex(x, y, color2);\n      }\n    }\n  }, {\n    key: \"quad\",\n    value: function quad(filled, x, y, x2, y2, x3, y3, x4, y4) {\n      var color = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : null;\n      var color2 = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : null;\n      var color3 = arguments.length > 11 && arguments[11] !== undefined ? arguments[11] : null;\n      var color4 = arguments.length > 12 && arguments[12] !== undefined ? arguments[12] : null;\n      this.check(filled ? ShapeType.Filled : ShapeType.Line, 3);\n      if (color === null) color = this.color;\n      if (color2 === null) color2 = this.color;\n      if (color3 === null) color3 = this.color;\n      if (color4 === null) color4 = this.color;\n\n      if (filled) {\n        this.vertex(x, y, color);\n        this.vertex(x2, y2, color2);\n        this.vertex(x3, y3, color3);\n        this.vertex(x3, y3, color3);\n        this.vertex(x4, y4, color4);\n        this.vertex(x, y, color);\n      } else {\n        this.vertex(x, y, color);\n        this.vertex(x2, y2, color2);\n        this.vertex(x2, y2, color2);\n        this.vertex(x3, y3, color3);\n        this.vertex(x3, y3, color3);\n        this.vertex(x4, y4, color4);\n        this.vertex(x4, y4, color4);\n        this.vertex(x, y, color);\n      }\n    }\n  }, {\n    key: \"rect\",\n    value: function rect(filled, x, y, width, height) {\n      var color = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      this.quad(filled, x, y, x + width, y, x + width, y + height, x, y + height, color, color, color, color);\n    }\n  }, {\n    key: \"rectLine\",\n    value: function rectLine(filled, x1, y1, x2, y2, width) {\n      var color = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n      this.check(filled ? ShapeType.Filled : ShapeType.Line, 8);\n      if (color === null) color = this.color;\n      var t = this.tmp.set(y2 - y1, x1 - x2);\n      t.nor();\n      width *= 0.5;\n      var tx = t.x * width;\n      var ty = t.y * width;\n\n      if (!filled) {\n        this.vertex(x1 + tx, y1 + ty, color);\n        this.vertex(x1 - tx, y1 - ty, color);\n        this.vertex(x2 + tx, y2 + ty, color);\n        this.vertex(x2 - tx, y2 - ty, color);\n        this.vertex(x2 + tx, y2 + ty, color);\n        this.vertex(x1 + tx, y1 + ty, color);\n        this.vertex(x2 - tx, y2 - ty, color);\n        this.vertex(x1 - tx, y1 - ty, color);\n      } else {\n        this.vertex(x1 + tx, y1 + ty, color);\n        this.vertex(x1 - tx, y1 - ty, color);\n        this.vertex(x2 + tx, y2 + ty, color);\n        this.vertex(x2 - tx, y2 - ty, color);\n        this.vertex(x2 + tx, y2 + ty, color);\n        this.vertex(x1 - tx, y1 - ty, color);\n      }\n    }\n  }, {\n    key: \"x\",\n    value: function x(_x, y, size) {\n      this.line(_x - size, y - size, _x + size, y + size);\n      this.line(_x - size, y + size, _x + size, y - size);\n    }\n  }, {\n    key: \"polygon\",\n    value: function polygon(polygonVertices, offset, count) {\n      var color = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      if (count < 3) throw new Error('Polygon must contain at least 3 vertices');\n      this.check(ShapeType.Line, count * 2);\n      if (color === null) color = this.color;\n      offset <<= 1;\n      count <<= 1;\n      var firstX = polygonVertices[offset];\n      var firstY = polygonVertices[offset + 1];\n      var last = offset + count;\n\n      for (var i = offset, n = offset + count - 2; i < n; i += 2) {\n        var x1 = polygonVertices[i];\n        var y1 = polygonVertices[i + 1];\n        var x2 = 0;\n        var y2 = 0;\n\n        if (i + 2 >= last) {\n          x2 = firstX;\n          y2 = firstY;\n        } else {\n          x2 = polygonVertices[i + 2];\n          y2 = polygonVertices[i + 3];\n        }\n\n        this.vertex(x1, y1, color);\n        this.vertex(x2, y2, color);\n      }\n    }\n  }, {\n    key: \"circle\",\n    value: function circle(filled, x, y, radius) {\n      var color = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n      var segments = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n      if (segments === 0) segments = Math.max(1, 6 * Utils_1.MathUtils.cbrt(radius) | 0);\n      if (segments <= 0) throw new Error('segments must be > 0.');\n      if (color === null) color = this.color;\n      var angle = 2 * Utils_1.MathUtils.PI / segments;\n      var cos = Math.cos(angle);\n      var sin = Math.sin(angle);\n      var cx = radius,\n          cy = 0;\n\n      if (!filled) {\n        this.check(ShapeType.Line, segments * 2 + 2);\n\n        for (var i = 0; i < segments; i++) {\n          this.vertex(x + cx, y + cy, color);\n          var temp = cx;\n          cx = cos * cx - sin * cy;\n          cy = sin * temp + cos * cy;\n          this.vertex(x + cx, y + cy, color);\n        } // Ensure the last segment is identical to the first.\n\n\n        this.vertex(x + cx, y + cy, color);\n      } else {\n        this.check(ShapeType.Filled, segments * 3 + 3);\n        segments--;\n\n        for (var _i = 0; _i < segments; _i++) {\n          this.vertex(x, y, color);\n          this.vertex(x + cx, y + cy, color);\n          var _temp = cx;\n          cx = cos * cx - sin * cy;\n          cy = sin * _temp + cos * cy;\n          this.vertex(x + cx, y + cy, color);\n        } // Ensure the last segment is identical to the first.\n\n\n        this.vertex(x, y, color);\n        this.vertex(x + cx, y + cy, color);\n      }\n\n      cx = radius;\n      cy = 0;\n      this.vertex(x + cx, y + cy, color);\n    }\n  }, {\n    key: \"curve\",\n    value: function curve(x1, y1, cx1, cy1, cx2, cy2, x2, y2, segments) {\n      var color = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : null;\n      this.check(ShapeType.Line, segments * 2 + 2);\n      if (color === null) color = this.color; // Algorithm from: http://www.antigrain.com/research/bezier_interpolation/index.html#PAGE_BEZIER_INTERPOLATION\n\n      var subdiv_step = 1 / segments;\n      var subdiv_step2 = subdiv_step * subdiv_step;\n      var subdiv_step3 = subdiv_step * subdiv_step * subdiv_step;\n      var pre1 = 3 * subdiv_step;\n      var pre2 = 3 * subdiv_step2;\n      var pre4 = 6 * subdiv_step2;\n      var pre5 = 6 * subdiv_step3;\n      var tmp1x = x1 - cx1 * 2 + cx2;\n      var tmp1y = y1 - cy1 * 2 + cy2;\n      var tmp2x = (cx1 - cx2) * 3 - x1 + x2;\n      var tmp2y = (cy1 - cy2) * 3 - y1 + y2;\n      var fx = x1;\n      var fy = y1;\n      var dfx = (cx1 - x1) * pre1 + tmp1x * pre2 + tmp2x * subdiv_step3;\n      var dfy = (cy1 - y1) * pre1 + tmp1y * pre2 + tmp2y * subdiv_step3;\n      var ddfx = tmp1x * pre4 + tmp2x * pre5;\n      var ddfy = tmp1y * pre4 + tmp2y * pre5;\n      var dddfx = tmp2x * pre5;\n      var dddfy = tmp2y * pre5;\n\n      while (segments-- > 0) {\n        this.vertex(fx, fy, color);\n        fx += dfx;\n        fy += dfy;\n        dfx += ddfx;\n        dfy += ddfy;\n        ddfx += dddfx;\n        ddfy += dddfy;\n        this.vertex(fx, fy, color);\n      }\n\n      this.vertex(fx, fy, color);\n      this.vertex(x2, y2, color);\n    }\n  }, {\n    key: \"vertex\",\n    value: function vertex(x, y, color) {\n      var idx = this.vertexIndex;\n      var vertices = this.mesh.getVertices();\n      vertices[idx++] = x;\n      vertices[idx++] = y;\n      vertices[idx++] = color.r;\n      vertices[idx++] = color.g;\n      vertices[idx++] = color.b;\n      vertices[idx++] = color.a;\n      this.vertexIndex = idx;\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      if (!this.isDrawing) throw new Error('ShapeRenderer.begin() has not been called');\n      this.flush();\n      var gl = this.context.gl;\n      gl.disable(gl.BLEND);\n      this.isDrawing = false;\n    }\n  }, {\n    key: \"flush\",\n    value: function flush() {\n      if (this.vertexIndex === 0) return;\n      this.mesh.setVerticesLength(this.vertexIndex);\n      this.mesh.draw(this.shader, this.shapeType);\n      this.vertexIndex = 0;\n    }\n  }, {\n    key: \"check\",\n    value: function check(shapeType, numVertices) {\n      if (!this.isDrawing) throw new Error('ShapeRenderer.begin() has not been called');\n\n      if (this.shapeType === shapeType) {\n        if (this.mesh.maxVertices() - this.mesh.numVertices() < numVertices) this.flush();else return;\n      } else {\n        this.flush();\n        this.shapeType = shapeType;\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.mesh.dispose();\n    }\n  }]);\n\n  return ShapeRenderer;\n}();\n\nexports.ShapeRenderer = ShapeRenderer;","map":{"version":3,"names":["Object","defineProperty","exports","value","ShapeRenderer","ShapeType","Mesh_1","require","Shader_1","Utils_1","Vector2_1","WebGL_1","context","maxVertices","isDrawing","shapeType","Filled","color","Color","vertexIndex","tmp","Vector2","projectionValues","Float32Array","Error","ManagedWebGLRenderingContext","mesh","Mesh","Position2Attribute","ColorAttribute","gl","srcColorBlend","SRC_ALPHA","srcAlphaBlend","ONE","dstBlend","ONE_MINUS_SRC_ALPHA","shader","Shader","newColored","bind","setUniform4x4f","MVP_MATRIX","enable","BLEND","blendFuncSeparate","flush","setFromColor","r","g","b","a","set","x","y","check","Point","vertex","x2","y2","Line","filled","x3","y3","color2","color3","x4","y4","color4","width","height","quad","x1","y1","t","nor","tx","ty","size","line","polygonVertices","offset","count","firstX","firstY","last","i","n","radius","segments","Math","max","MathUtils","cbrt","angle","PI","cos","sin","cx","cy","temp","cx1","cy1","cx2","cy2","subdiv_step","subdiv_step2","subdiv_step3","pre1","pre2","pre4","pre5","tmp1x","tmp1y","tmp2x","tmp2y","fx","fy","dfx","dfy","ddfx","ddfy","dddfx","dddfy","idx","vertices","getVertices","disable","setVerticesLength","draw","numVertices","dispose"],"sources":["D:/projects/test-game/node_modules/gdxts/dist/lib/ShapeRenderer.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShapeRenderer = exports.ShapeType = void 0;\nconst Mesh_1 = require(\"./Mesh\");\nconst Shader_1 = require(\"./Shader\");\nconst Utils_1 = require(\"./Utils\");\nconst Vector2_1 = require(\"./Vector2\");\nconst WebGL_1 = require(\"./WebGL\");\nvar ShapeType;\n(function (ShapeType) {\n    ShapeType[ShapeType[\"Point\"] = 0] = \"Point\";\n    ShapeType[ShapeType[\"Line\"] = 1] = \"Line\";\n    ShapeType[ShapeType[\"Filled\"] = 4] = \"Filled\";\n})(ShapeType = exports.ShapeType || (exports.ShapeType = {}));\nclass ShapeRenderer {\n    constructor(context, maxVertices = 10920) {\n        this.isDrawing = false;\n        this.shapeType = ShapeType.Filled;\n        this.color = new Utils_1.Color(1, 1, 1, 1);\n        this.vertexIndex = 0;\n        this.tmp = new Vector2_1.Vector2();\n        this.projectionValues = new Float32Array(16);\n        if (maxVertices > 10920)\n            throw new Error(\"Can't have more than 10920 triangles per batch: \" + maxVertices);\n        this.context =\n            context instanceof WebGL_1.ManagedWebGLRenderingContext ? context : new WebGL_1.ManagedWebGLRenderingContext(context);\n        this.mesh = new Mesh_1.Mesh(context, [new Mesh_1.Position2Attribute(), new Mesh_1.ColorAttribute()], maxVertices, 0);\n        let gl = this.context.gl;\n        this.srcColorBlend = gl.SRC_ALPHA;\n        this.srcAlphaBlend = gl.ONE;\n        this.dstBlend = gl.ONE_MINUS_SRC_ALPHA;\n        this.shader = Shader_1.Shader.newColored(gl);\n    }\n    setProjection(projectionValues) {\n        this.projectionValues = projectionValues;\n    }\n    begin() {\n        if (this.isDrawing)\n            throw new Error('ShapeRenderer.begin() has already been called');\n        this.vertexIndex = 0;\n        this.isDrawing = true;\n        this.shader.bind();\n        this.shader.setUniform4x4f(Shader_1.Shader.MVP_MATRIX, this.projectionValues);\n        let gl = this.context.gl;\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(this.srcColorBlend, this.dstBlend, this.srcAlphaBlend, this.dstBlend);\n    }\n    setBlendMode(srcColorBlend, srcAlphaBlend, dstBlend) {\n        this.srcColorBlend = srcColorBlend;\n        this.srcAlphaBlend = srcAlphaBlend;\n        this.dstBlend = dstBlend;\n        if (this.isDrawing) {\n            this.flush();\n            let gl = this.context.gl;\n            gl.blendFuncSeparate(srcColorBlend, dstBlend, srcAlphaBlend, dstBlend);\n        }\n    }\n    setColor(color) {\n        this.color.setFromColor(color);\n    }\n    setColorWith(r, g, b, a) {\n        this.color.set(r, g, b, a);\n    }\n    point(x, y, color = null) {\n        this.check(ShapeType.Point, 1);\n        if (color === null)\n            color = this.color;\n        this.vertex(x, y, color);\n    }\n    line(x, y, x2, y2, color = null) {\n        this.check(ShapeType.Line, 2);\n        if (color === null)\n            color = this.color;\n        this.vertex(x, y, color);\n        this.vertex(x2, y2, color);\n    }\n    triangle(filled, x, y, x2, y2, x3, y3, color = null, color2 = null, color3 = null) {\n        this.check(filled ? ShapeType.Filled : ShapeType.Line, 3);\n        if (color === null)\n            color = this.color;\n        if (color2 === null)\n            color2 = this.color;\n        if (color3 === null)\n            color3 = this.color;\n        if (filled) {\n            this.vertex(x, y, color);\n            this.vertex(x2, y2, color2);\n            this.vertex(x3, y3, color3);\n        }\n        else {\n            this.vertex(x, y, color);\n            this.vertex(x2, y2, color2);\n            this.vertex(x2, y2, color);\n            this.vertex(x3, y3, color2);\n            this.vertex(x3, y3, color);\n            this.vertex(x, y, color2);\n        }\n    }\n    quad(filled, x, y, x2, y2, x3, y3, x4, y4, color = null, color2 = null, color3 = null, color4 = null) {\n        this.check(filled ? ShapeType.Filled : ShapeType.Line, 3);\n        if (color === null)\n            color = this.color;\n        if (color2 === null)\n            color2 = this.color;\n        if (color3 === null)\n            color3 = this.color;\n        if (color4 === null)\n            color4 = this.color;\n        if (filled) {\n            this.vertex(x, y, color);\n            this.vertex(x2, y2, color2);\n            this.vertex(x3, y3, color3);\n            this.vertex(x3, y3, color3);\n            this.vertex(x4, y4, color4);\n            this.vertex(x, y, color);\n        }\n        else {\n            this.vertex(x, y, color);\n            this.vertex(x2, y2, color2);\n            this.vertex(x2, y2, color2);\n            this.vertex(x3, y3, color3);\n            this.vertex(x3, y3, color3);\n            this.vertex(x4, y4, color4);\n            this.vertex(x4, y4, color4);\n            this.vertex(x, y, color);\n        }\n    }\n    rect(filled, x, y, width, height, color = null) {\n        this.quad(filled, x, y, x + width, y, x + width, y + height, x, y + height, color, color, color, color);\n    }\n    rectLine(filled, x1, y1, x2, y2, width, color = null) {\n        this.check(filled ? ShapeType.Filled : ShapeType.Line, 8);\n        if (color === null)\n            color = this.color;\n        let t = this.tmp.set(y2 - y1, x1 - x2);\n        t.nor();\n        width *= 0.5;\n        let tx = t.x * width;\n        let ty = t.y * width;\n        if (!filled) {\n            this.vertex(x1 + tx, y1 + ty, color);\n            this.vertex(x1 - tx, y1 - ty, color);\n            this.vertex(x2 + tx, y2 + ty, color);\n            this.vertex(x2 - tx, y2 - ty, color);\n            this.vertex(x2 + tx, y2 + ty, color);\n            this.vertex(x1 + tx, y1 + ty, color);\n            this.vertex(x2 - tx, y2 - ty, color);\n            this.vertex(x1 - tx, y1 - ty, color);\n        }\n        else {\n            this.vertex(x1 + tx, y1 + ty, color);\n            this.vertex(x1 - tx, y1 - ty, color);\n            this.vertex(x2 + tx, y2 + ty, color);\n            this.vertex(x2 - tx, y2 - ty, color);\n            this.vertex(x2 + tx, y2 + ty, color);\n            this.vertex(x1 - tx, y1 - ty, color);\n        }\n    }\n    x(x, y, size) {\n        this.line(x - size, y - size, x + size, y + size);\n        this.line(x - size, y + size, x + size, y - size);\n    }\n    polygon(polygonVertices, offset, count, color = null) {\n        if (count < 3)\n            throw new Error('Polygon must contain at least 3 vertices');\n        this.check(ShapeType.Line, count * 2);\n        if (color === null)\n            color = this.color;\n        offset <<= 1;\n        count <<= 1;\n        let firstX = polygonVertices[offset];\n        let firstY = polygonVertices[offset + 1];\n        let last = offset + count;\n        for (let i = offset, n = offset + count - 2; i < n; i += 2) {\n            let x1 = polygonVertices[i];\n            let y1 = polygonVertices[i + 1];\n            let x2 = 0;\n            let y2 = 0;\n            if (i + 2 >= last) {\n                x2 = firstX;\n                y2 = firstY;\n            }\n            else {\n                x2 = polygonVertices[i + 2];\n                y2 = polygonVertices[i + 3];\n            }\n            this.vertex(x1, y1, color);\n            this.vertex(x2, y2, color);\n        }\n    }\n    circle(filled, x, y, radius, color = null, segments = 0) {\n        if (segments === 0)\n            segments = Math.max(1, (6 * Utils_1.MathUtils.cbrt(radius)) | 0);\n        if (segments <= 0)\n            throw new Error('segments must be > 0.');\n        if (color === null)\n            color = this.color;\n        let angle = (2 * Utils_1.MathUtils.PI) / segments;\n        let cos = Math.cos(angle);\n        let sin = Math.sin(angle);\n        let cx = radius, cy = 0;\n        if (!filled) {\n            this.check(ShapeType.Line, segments * 2 + 2);\n            for (let i = 0; i < segments; i++) {\n                this.vertex(x + cx, y + cy, color);\n                let temp = cx;\n                cx = cos * cx - sin * cy;\n                cy = sin * temp + cos * cy;\n                this.vertex(x + cx, y + cy, color);\n            }\n            // Ensure the last segment is identical to the first.\n            this.vertex(x + cx, y + cy, color);\n        }\n        else {\n            this.check(ShapeType.Filled, segments * 3 + 3);\n            segments--;\n            for (let i = 0; i < segments; i++) {\n                this.vertex(x, y, color);\n                this.vertex(x + cx, y + cy, color);\n                let temp = cx;\n                cx = cos * cx - sin * cy;\n                cy = sin * temp + cos * cy;\n                this.vertex(x + cx, y + cy, color);\n            }\n            // Ensure the last segment is identical to the first.\n            this.vertex(x, y, color);\n            this.vertex(x + cx, y + cy, color);\n        }\n        cx = radius;\n        cy = 0;\n        this.vertex(x + cx, y + cy, color);\n    }\n    curve(x1, y1, cx1, cy1, cx2, cy2, x2, y2, segments, color = null) {\n        this.check(ShapeType.Line, segments * 2 + 2);\n        if (color === null)\n            color = this.color;\n        // Algorithm from: http://www.antigrain.com/research/bezier_interpolation/index.html#PAGE_BEZIER_INTERPOLATION\n        let subdiv_step = 1 / segments;\n        let subdiv_step2 = subdiv_step * subdiv_step;\n        let subdiv_step3 = subdiv_step * subdiv_step * subdiv_step;\n        let pre1 = 3 * subdiv_step;\n        let pre2 = 3 * subdiv_step2;\n        let pre4 = 6 * subdiv_step2;\n        let pre5 = 6 * subdiv_step3;\n        let tmp1x = x1 - cx1 * 2 + cx2;\n        let tmp1y = y1 - cy1 * 2 + cy2;\n        let tmp2x = (cx1 - cx2) * 3 - x1 + x2;\n        let tmp2y = (cy1 - cy2) * 3 - y1 + y2;\n        let fx = x1;\n        let fy = y1;\n        let dfx = (cx1 - x1) * pre1 + tmp1x * pre2 + tmp2x * subdiv_step3;\n        let dfy = (cy1 - y1) * pre1 + tmp1y * pre2 + tmp2y * subdiv_step3;\n        let ddfx = tmp1x * pre4 + tmp2x * pre5;\n        let ddfy = tmp1y * pre4 + tmp2y * pre5;\n        let dddfx = tmp2x * pre5;\n        let dddfy = tmp2y * pre5;\n        while (segments-- > 0) {\n            this.vertex(fx, fy, color);\n            fx += dfx;\n            fy += dfy;\n            dfx += ddfx;\n            dfy += ddfy;\n            ddfx += dddfx;\n            ddfy += dddfy;\n            this.vertex(fx, fy, color);\n        }\n        this.vertex(fx, fy, color);\n        this.vertex(x2, y2, color);\n    }\n    vertex(x, y, color) {\n        let idx = this.vertexIndex;\n        let vertices = this.mesh.getVertices();\n        vertices[idx++] = x;\n        vertices[idx++] = y;\n        vertices[idx++] = color.r;\n        vertices[idx++] = color.g;\n        vertices[idx++] = color.b;\n        vertices[idx++] = color.a;\n        this.vertexIndex = idx;\n    }\n    end() {\n        if (!this.isDrawing)\n            throw new Error('ShapeRenderer.begin() has not been called');\n        this.flush();\n        let gl = this.context.gl;\n        gl.disable(gl.BLEND);\n        this.isDrawing = false;\n    }\n    flush() {\n        if (this.vertexIndex === 0)\n            return;\n        this.mesh.setVerticesLength(this.vertexIndex);\n        this.mesh.draw(this.shader, this.shapeType);\n        this.vertexIndex = 0;\n    }\n    check(shapeType, numVertices) {\n        if (!this.isDrawing)\n            throw new Error('ShapeRenderer.begin() has not been called');\n        if (this.shapeType === shapeType) {\n            if (this.mesh.maxVertices() - this.mesh.numVertices() < numVertices)\n                this.flush();\n            else\n                return;\n        }\n        else {\n            this.flush();\n            this.shapeType = shapeType;\n        }\n    }\n    dispose() {\n        this.mesh.dispose();\n    }\n}\nexports.ShapeRenderer = ShapeRenderer;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}