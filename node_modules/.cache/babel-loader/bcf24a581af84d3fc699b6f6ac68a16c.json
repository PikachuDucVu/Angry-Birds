{"ast":null,"code":"import { b2BodyDef, b2BodyType, b2CircleShape, b2ContactListener, b2FixtureDef, b2PolygonShape, b2World } from \"box2d.ts\";\nimport { World } from \"flat-ecs\";\nimport { Animation, AssetManager, Color, createGameLoop, createStage, createViewport, InputEvent, PlayMode, PolygonBatch, ShapeRenderer, Texture, TextureRegion, Vector2, ViewportInputHandler } from \"gdxts\";\nimport { BackgroundRenderSystem } from \"./system/BackgroundRenderSystem\";\nconst WORLD_WIDTH = 1300;\nconst WORLD_HEIGHT = 500;\nconst contactListener = new b2ContactListener();\n\nconst createWall = (world, x, y, width, height) => {\n  const bodyDef = new b2BodyDef();\n  bodyDef.type = b2BodyType.b2_staticBody;\n  bodyDef.position.Set(x + width / 2, y + height / 2);\n  const body = world.CreateBody(bodyDef);\n  const shape = new b2PolygonShape();\n  shape.SetAsBox(width / 2, height / 2);\n  body.SetUserData(\"ground\");\n  body.CreateFixture(shape);\n};\n\nconst createBall = (world, x, y, radius) => {\n  const bodyDef = new b2BodyDef();\n  bodyDef.type = b2BodyType.b2_staticBody;\n  bodyDef.position.Set(x + radius / 2, y + radius / 2);\n  const circle = new b2CircleShape();\n  circle.m_radius = radius;\n  const fixtureDef = new b2FixtureDef();\n  fixtureDef.shape = circle; // fixtureDef.density = 1;\n\n  fixtureDef.restitution = 0.5; // bounce ball\n\n  fixtureDef.friction = 1;\n  fixtureDef.shape = circle;\n  fixtureDef.userData = \"ballFixture\";\n  const body = world.CreateBody(bodyDef);\n  body.CreateFixture(fixtureDef);\n  body.SetUserData(\"ball\");\n  return body;\n};\n\nconst createBox = (world, x, y, width, height, userData) => {\n  const bodyDef = new b2BodyDef();\n  bodyDef.type = b2BodyType.b2_dynamicBody;\n  bodyDef.position.Set(x + width / 2, y + height / 2);\n  const body = world.CreateBody(bodyDef);\n  const shape = new b2PolygonShape();\n  shape.SetAsBox(width * 0.5, height * 0.5);\n  body.SetUserData({\n    name: userData.name,\n    durability: 0\n  });\n  body.CreateFixture(shape);\n  return body;\n};\n\nconst WALL_COLOR = new Color(0.5, 0.5, 0.5, 1);\nconst METER_TO_WORLD = 100;\nexport const init = async () => {\n  const stage = createStage();\n  const canvas = stage.getCanvas();\n  const viewport = createViewport(canvas, WORLD_WIDTH, WORLD_HEIGHT);\n  const gl = viewport.getContext();\n  const camera = viewport.getCamera();\n  const batch = new PolygonBatch(gl);\n  const assetManager = new AssetManager(gl);\n  await assetManager.loadTexture(\"./background.png\", \"bg\");\n  camera.setYDown(true);\n  batch.setYDown(true);\n  const world = new World();\n  world.register(\"gl\", gl);\n  world.register(\"batch\", batch);\n  world.register(\"assetManager\", assetManager);\n  world.addSystem(new BackgroundRenderSystem(), false);\n  const bird = await Texture.load(gl, \"./bird.png\");\n  const slingShot = await Texture.load(gl, \"./slingshot.png\");\n  const pigAsset = await Texture.load(gl, \"./pigAsset.png\");\n  const mapData = await fetch(\"./untitled.tmj\").then(res => res.json());\n  const wallData = mapData.layers.find(l => l.name === \"walls\").objects;\n  const shapeRenderer = new ShapeRenderer(gl);\n  const physicWorld = new b2World({\n    x: 0,\n    y: 10\n  });\n  const boxTexture = await Texture.load(gl, \"./testAnimation1.png\");\n  const boxesRegions = TextureRegion.splitTexture(boxTexture, 1, 4);\n  const pigTexture = await TextureRegion.splitTexture(pigAsset, 2, 1);\n  let frameDuration = 0.01;\n  const boxAnimation = new Animation(boxesRegions.slice(0, 4), frameDuration);\n  const pigAnimation = new Animation(pigTexture.slice(0, 2), frameDuration);\n  const boxRegions = [boxAnimation.getKeyFrame(0, PlayMode.NORMAL), boxAnimation.getKeyFrame(0, PlayMode.NORMAL), boxAnimation.getKeyFrame(0, PlayMode.NORMAL), boxAnimation.getKeyFrame(0, PlayMode.NORMAL), boxAnimation.getKeyFrame(0, PlayMode.NORMAL), boxAnimation.getKeyFrame(0, PlayMode.NORMAL)];\n  const pigRegions = [pigAnimation.getKeyFrame(0, PlayMode.NORMAL), pigAnimation.getKeyFrame(0, PlayMode.NORMAL)];\n\n  for (let wall of wallData) {\n    createWall(physicWorld, wall.x / METER_TO_WORLD, wall.y / METER_TO_WORLD, wall.width / METER_TO_WORLD, wall.height / METER_TO_WORLD);\n  }\n\n  const BOX_SIZE = 0.5;\n  const PIG_SIZE = 0.3;\n  const pigs = [];\n  const boxes = [];\n  let pigNumber = 0;\n  let boxNumber = 0;\n  let positionBoxX = 6;\n  let positionBoxY = 4.3;\n\n  for (let i = 0; i < 3; i++) {\n    positionBoxX = 6 + i * 0.4;\n\n    for (let j = 0; j <= i; j++) {\n      boxes.push(createBox(physicWorld, positionBoxX += 0.51, positionBoxY -= 0.55, BOX_SIZE, BOX_SIZE, {\n        name: `box ${boxNumber++}`\n      }));\n    }\n\n    if (i < 2) {\n      pigs.push(createBox(physicWorld, positionBoxX + 0.5, positionBoxY - 0.25, PIG_SIZE, PIG_SIZE, {\n        name: `pig ${pigNumber++}`\n      }));\n    }\n  }\n\n  const BALL_RADIUS = 0.2;\n  let ball = createBall(physicWorld, 2, 3.5, BALL_RADIUS);\n  let hasBirdOnSlingShot = true;\n  const originPosition = new Vector2(ball.GetPosition().x * METER_TO_WORLD, ball.GetPosition().y * METER_TO_WORLD);\n  let slingPos = new Vector2(ball.GetPosition().x * METER_TO_WORLD, ball.GetPosition().y * METER_TO_WORLD);\n  const inputHandler = new ViewportInputHandler(viewport);\n  inputHandler.addEventListener(InputEvent.TouchMove, () => {\n    if (inputHandler.isTouched()) {\n      slingPos = inputHandler.getTouchedWorldCoord();\n    }\n  });\n  inputHandler.addEventListener(InputEvent.TouchEnd, () => {\n    if (hasBirdOnSlingShot) {\n      ball.SetType(b2BodyType.b2_dynamicBody);\n      ball.ApplyLinearImpulseToCenter({\n        x: 7 * (originPosition.x - slingPos.x) / METER_TO_WORLD,\n        y: 7 * (originPosition.y - slingPos.y) / METER_TO_WORLD\n      }, true);\n      hasBirdOnSlingShot = false;\n    }\n  });\n  let delayTime = 0;\n  window.addEventListener(\"keydown\", function (e) {\n    if (!hasBirdOnSlingShot && e.key === \"r\") {\n      physicWorld.DestroyBody(ball);\n      ball = createBall(physicWorld, 2, 3.5, BALL_RADIUS);\n      hasBirdOnSlingShot = true;\n    }\n  });\n  gl.clearColor(0, 0, 0, 1);\n\n  contactListener.BeginContact = function (contact) {\n    if (delayTime >= 1) {\n      const fixtureAData = contact.GetFixtureA().GetBody().GetUserData();\n      const fixtureBData = contact.GetFixtureB().GetBody().GetUserData(); // if (fixtureBData !== \"ball\") return;\n\n      if (fixtureAData.name && fixtureAData.name.startsWith(\"box\")) {\n        fixtureAData.durability += 1;\n      }\n\n      if (fixtureAData.name && fixtureAData.name.startsWith(\"pig\")) {\n        fixtureAData.durability += 1;\n      }\n    } // console.log(\n    //   contact.GetFixtureA().GetBody().GetUserData(),\n    //   contact.GetFixtureB().GetBody().GetUserData()\n    // );\n    // console.log(contact);\n\n  };\n\n  physicWorld.SetContactListener(contactListener);\n\n  const updateBoxRegionByDurability = (index, durability) => {\n    boxRegions[index] = boxAnimation.getKeyFrame(frameDuration * durability, PlayMode.NORMAL);\n  };\n\n  const updatePigRegionByDurability = (index, durability) => {\n    pigRegions[index] = pigAnimation.getKeyFrame(frameDuration * durability, PlayMode.NORMAL);\n  };\n\n  createGameLoop(delta => {\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    for (let i = 0; i < boxes.length; i++) {\n      const elementBox = boxes[i];\n      const boxDurability = elementBox.GetUserData().durability;\n\n      if (typeof boxDurability === \"number\") {\n        if (boxDurability <= 4) {\n          updateBoxRegionByDurability(i, boxDurability);\n        } else {\n          physicWorld.DestroyBody(boxes[i]);\n          boxes.splice(i, 1);\n        }\n      }\n    }\n\n    for (let i = 0; i < pigs.length; i++) {\n      const elementPig = pigs[i];\n      const pigDurability = elementPig.GetUserData().durability;\n\n      if (typeof pigDurability === \"number\") {\n        if (pigDurability <= 1) {\n          updatePigRegionByDurability(i, pigDurability);\n        } else {\n          physicWorld.DestroyBody(pigs[i]);\n          pigs.splice(i, 1);\n        }\n      }\n    }\n\n    physicWorld.Step(delta, 8, 3);\n    batch.setProjection(camera.combined);\n    shapeRenderer.setProjection(camera.combined);\n    shapeRenderer.begin();\n    shapeRenderer.circle(true, ball.GetPosition().x * METER_TO_WORLD, ball.GetPosition().y * METER_TO_WORLD, BALL_RADIUS * METER_TO_WORLD, Color.RED);\n    shapeRenderer.end();\n    shapeRenderer.begin();\n    shapeRenderer.circle(true, slingPos.x, slingPos.y, 0.1 * METER_TO_WORLD, Color.BLUE);\n    shapeRenderer.end();\n    world.setDelta(delta);\n    world.processActiveSystem();\n    world.processPassiveSystem();\n    batch.begin();\n\n    for (let i = 0; i < boxes.length; i++) {\n      boxRegions[i].draw(batch, boxes[i].GetPosition().x * METER_TO_WORLD - BOX_SIZE * METER_TO_WORLD / 2, boxes[i].GetPosition().y * METER_TO_WORLD - BOX_SIZE * METER_TO_WORLD / 2, BOX_SIZE * METER_TO_WORLD, BOX_SIZE * METER_TO_WORLD);\n    }\n\n    batch.draw(slingShot, 2 * METER_TO_WORLD, 3.5 * METER_TO_WORLD, 0.25 * METER_TO_WORLD, 0.7 * METER_TO_WORLD);\n\n    for (let i = 0; i < pigs.length; i++) {\n      pigRegions[i].draw(batch, pigs[i].GetPosition().x * METER_TO_WORLD - PIG_SIZE * METER_TO_WORLD / 2, pigs[i].GetPosition().y * METER_TO_WORLD - PIG_SIZE * METER_TO_WORLD / 2, PIG_SIZE * METER_TO_WORLD, PIG_SIZE * METER_TO_WORLD);\n    } // console.log(box.GetContactList());\n\n\n    batch.draw(bird, ball.GetPosition().x * METER_TO_WORLD - 25, ball.GetPosition().y * METER_TO_WORLD - 25, BOX_SIZE * METER_TO_WORLD, BOX_SIZE * METER_TO_WORLD);\n    delayTime += delta;\n    batch.end();\n  });\n};\ninit();","map":{"version":3,"names":["b2BodyDef","b2BodyType","b2CircleShape","b2ContactListener","b2FixtureDef","b2PolygonShape","b2World","World","Animation","AssetManager","Color","createGameLoop","createStage","createViewport","InputEvent","PlayMode","PolygonBatch","ShapeRenderer","Texture","TextureRegion","Vector2","ViewportInputHandler","BackgroundRenderSystem","WORLD_WIDTH","WORLD_HEIGHT","contactListener","createWall","world","x","y","width","height","bodyDef","type","b2_staticBody","position","Set","body","CreateBody","shape","SetAsBox","SetUserData","CreateFixture","createBall","radius","circle","m_radius","fixtureDef","restitution","friction","userData","createBox","b2_dynamicBody","name","durability","WALL_COLOR","METER_TO_WORLD","init","stage","canvas","getCanvas","viewport","gl","getContext","camera","getCamera","batch","assetManager","loadTexture","setYDown","register","addSystem","bird","load","slingShot","pigAsset","mapData","fetch","then","res","json","wallData","layers","find","l","objects","shapeRenderer","physicWorld","boxTexture","boxesRegions","splitTexture","pigTexture","frameDuration","boxAnimation","slice","pigAnimation","boxRegions","getKeyFrame","NORMAL","pigRegions","wall","BOX_SIZE","PIG_SIZE","pigs","boxes","pigNumber","boxNumber","positionBoxX","positionBoxY","i","j","push","BALL_RADIUS","ball","hasBirdOnSlingShot","originPosition","GetPosition","slingPos","inputHandler","addEventListener","TouchMove","isTouched","getTouchedWorldCoord","TouchEnd","SetType","ApplyLinearImpulseToCenter","delayTime","window","e","key","DestroyBody","clearColor","BeginContact","contact","fixtureAData","GetFixtureA","GetBody","GetUserData","fixtureBData","GetFixtureB","startsWith","SetContactListener","updateBoxRegionByDurability","index","updatePigRegionByDurability","delta","clear","COLOR_BUFFER_BIT","length","elementBox","boxDurability","splice","elementPig","pigDurability","Step","setProjection","combined","begin","RED","end","BLUE","setDelta","processActiveSystem","processPassiveSystem","draw"],"sources":["D:/projects/test-game/src/index.ts"],"sourcesContent":["import {\r\n  b2Body,\r\n  b2BodyDef,\r\n  b2BodyType,\r\n  b2CircleShape,\r\n  b2Contact,\r\n  b2ContactListener,\r\n  b2FixtureDef,\r\n  b2PolygonShape,\r\n  b2World,\r\n} from \"box2d.ts\";\r\nimport { World } from \"flat-ecs\";\r\nimport {\r\n  Animation,\r\n  AssetManager,\r\n  Color,\r\n  createGameLoop,\r\n  createStage,\r\n  createViewport,\r\n  InputEvent,\r\n  PlayMode,\r\n  PolygonBatch,\r\n  ShapeRenderer,\r\n  Texture,\r\n  TextureRegion,\r\n  Vector2,\r\n  ViewportInputHandler,\r\n} from \"gdxts\";\r\nimport { BackgroundRenderSystem } from \"./system/BackgroundRenderSystem\";\r\n\r\nconst WORLD_WIDTH = 1300;\r\nconst WORLD_HEIGHT = 500;\r\n\r\nconst contactListener = new b2ContactListener();\r\n\r\nconst createWall = (\r\n  world: b2World,\r\n  x: number,\r\n  y: number,\r\n  width: number,\r\n  height: number\r\n) => {\r\n  const bodyDef = new b2BodyDef();\r\n  bodyDef.type = b2BodyType.b2_staticBody;\r\n  bodyDef.position.Set(x + width / 2, y + height / 2);\r\n  const body = world.CreateBody(bodyDef);\r\n  const shape = new b2PolygonShape();\r\n  shape.SetAsBox(width / 2, height / 2);\r\n  body.SetUserData(\"ground\");\r\n  body.CreateFixture(shape);\r\n};\r\n\r\nconst createBall = (\r\n  world: b2World,\r\n  x: number,\r\n  y: number,\r\n  radius: number\r\n): b2Body => {\r\n  const bodyDef = new b2BodyDef();\r\n  bodyDef.type = b2BodyType.b2_staticBody;\r\n  bodyDef.position.Set(x + radius / 2, y + radius / 2);\r\n  const circle = new b2CircleShape();\r\n  circle.m_radius = radius;\r\n  const fixtureDef = new b2FixtureDef();\r\n  fixtureDef.shape = circle;\r\n  // fixtureDef.density = 1;\r\n  fixtureDef.restitution = 0.5; // bounce ball\r\n  fixtureDef.friction = 1;\r\n  fixtureDef.shape = circle;\r\n  fixtureDef.userData = \"ballFixture\";\r\n\r\n  const body = world.CreateBody(bodyDef);\r\n  body.CreateFixture(fixtureDef);\r\n  body.SetUserData(\"ball\");\r\n  return body;\r\n};\r\n\r\nconst createBox = (\r\n  world: b2World,\r\n  x: number,\r\n  y: number,\r\n  width: number,\r\n  height: number,\r\n  userData: {\r\n    name: string;\r\n  }\r\n): b2Body => {\r\n  const bodyDef = new b2BodyDef();\r\n  bodyDef.type = b2BodyType.b2_dynamicBody;\r\n  bodyDef.position.Set(x + width / 2, y + height / 2);\r\n  const body = world.CreateBody(bodyDef);\r\n  const shape = new b2PolygonShape();\r\n  shape.SetAsBox(width * 0.5, height * 0.5);\r\n  body.SetUserData({\r\n    name: userData.name,\r\n    durability: 0,\r\n  });\r\n  body.CreateFixture(shape);\r\n  return body;\r\n};\r\n\r\nconst WALL_COLOR = new Color(0.5, 0.5, 0.5, 1);\r\nconst METER_TO_WORLD = 100;\r\n\r\nexport const init = async () => {\r\n  const stage = createStage();\r\n  const canvas = stage.getCanvas();\r\n  const viewport = createViewport(canvas, WORLD_WIDTH, WORLD_HEIGHT);\r\n  const gl = viewport.getContext();\r\n  const camera = viewport.getCamera();\r\n  const batch = new PolygonBatch(gl);\r\n\r\n  const assetManager = new AssetManager(gl);\r\n  await assetManager.loadTexture(\"./background.png\", \"bg\");\r\n\r\n  camera.setYDown(true);\r\n  batch.setYDown(true);\r\n\r\n  const world = new World();\r\n  world.register(\"gl\", gl);\r\n  world.register(\"batch\", batch);\r\n  world.register(\"assetManager\", assetManager);\r\n  world.addSystem(new BackgroundRenderSystem(), false);\r\n\r\n  const bird = await Texture.load(gl, \"./bird.png\");\r\n  const slingShot = await Texture.load(gl, \"./slingshot.png\");\r\n  const pigAsset = await Texture.load(gl, \"./pigAsset.png\");\r\n  const mapData = await fetch(\"./untitled.tmj\").then((res) => res.json());\r\n  const wallData = mapData.layers.find((l: any) => l.name === \"walls\").objects;\r\n  const shapeRenderer = new ShapeRenderer(gl);\r\n  const physicWorld = new b2World({\r\n    x: 0,\r\n    y: 10,\r\n  });\r\n\r\n  const boxTexture = await Texture.load(gl, \"./testAnimation1.png\");\r\n  const boxesRegions = TextureRegion.splitTexture(boxTexture, 1, 4);\r\n  const pigTexture = await TextureRegion.splitTexture(pigAsset, 2, 1);\r\n\r\n  let frameDuration = 0.01;\r\n  const boxAnimation = new Animation(boxesRegions.slice(0, 4), frameDuration);\r\n  const pigAnimation = new Animation(pigTexture.slice(0, 2), frameDuration);\r\n\r\n  const boxRegions = [\r\n    boxAnimation.getKeyFrame(0, PlayMode.NORMAL),\r\n    boxAnimation.getKeyFrame(0, PlayMode.NORMAL),\r\n    boxAnimation.getKeyFrame(0, PlayMode.NORMAL),\r\n    boxAnimation.getKeyFrame(0, PlayMode.NORMAL),\r\n    boxAnimation.getKeyFrame(0, PlayMode.NORMAL),\r\n    boxAnimation.getKeyFrame(0, PlayMode.NORMAL),\r\n  ];\r\n  const pigRegions = [\r\n    pigAnimation.getKeyFrame(0, PlayMode.NORMAL),\r\n    pigAnimation.getKeyFrame(0, PlayMode.NORMAL),\r\n  ];\r\n\r\n  for (let wall of wallData) {\r\n    createWall(\r\n      physicWorld,\r\n      wall.x / METER_TO_WORLD,\r\n      wall.y / METER_TO_WORLD,\r\n      wall.width / METER_TO_WORLD,\r\n      wall.height / METER_TO_WORLD\r\n    );\r\n  }\r\n\r\n  const BOX_SIZE = 0.5;\r\n  const PIG_SIZE = 0.3;\r\n  const pigs: b2Body[] = [];\r\n  const boxes: b2Body[] = [];\r\n  let pigNumber = 0;\r\n  let boxNumber = 0;\r\n  let positionBoxX = 6;\r\n  let positionBoxY = 4.3;\r\n\r\n  for (let i = 0; i < 3; i++) {\r\n    positionBoxX = 6 + i * 0.4;\r\n    for (let j = 0; j <= i; j++) {\r\n      boxes.push(\r\n        createBox(\r\n          physicWorld,\r\n          (positionBoxX += 0.51),\r\n          (positionBoxY -= 0.55),\r\n          BOX_SIZE,\r\n          BOX_SIZE,\r\n          {\r\n            name: `box ${boxNumber++}`,\r\n          }\r\n        )\r\n      );\r\n    }\r\n    if (i < 2) {\r\n      pigs.push(\r\n        createBox(\r\n          physicWorld,\r\n          positionBoxX + 0.5,\r\n          positionBoxY - 0.25,\r\n          PIG_SIZE,\r\n          PIG_SIZE,\r\n          {\r\n            name: `pig ${pigNumber++}`,\r\n          }\r\n        )\r\n      );\r\n    }\r\n  }\r\n\r\n  const BALL_RADIUS = 0.2;\r\n  let ball = createBall(physicWorld, 2, 3.5, BALL_RADIUS);\r\n  let hasBirdOnSlingShot = true;\r\n  const originPosition = new Vector2(\r\n    ball.GetPosition().x * METER_TO_WORLD,\r\n    ball.GetPosition().y * METER_TO_WORLD\r\n  );\r\n  let slingPos = new Vector2(\r\n    ball.GetPosition().x * METER_TO_WORLD,\r\n    ball.GetPosition().y * METER_TO_WORLD\r\n  );\r\n\r\n  const inputHandler = new ViewportInputHandler(viewport);\r\n\r\n  inputHandler.addEventListener(InputEvent.TouchMove, () => {\r\n    if (inputHandler.isTouched()) {\r\n      slingPos = inputHandler.getTouchedWorldCoord();\r\n    }\r\n  });\r\n  inputHandler.addEventListener(InputEvent.TouchEnd, () => {\r\n    if (hasBirdOnSlingShot) {\r\n      ball.SetType(b2BodyType.b2_dynamicBody);\r\n      ball.ApplyLinearImpulseToCenter(\r\n        {\r\n          x: (7 * (originPosition.x - slingPos.x)) / METER_TO_WORLD,\r\n          y: (7 * (originPosition.y - slingPos.y)) / METER_TO_WORLD,\r\n        },\r\n        true\r\n      );\r\n      hasBirdOnSlingShot = false;\r\n    }\r\n  });\r\n  let delayTime = 0;\r\n\r\n  window.addEventListener(\"keydown\", function (e) {\r\n    if (!hasBirdOnSlingShot && e.key === \"r\") {\r\n      physicWorld.DestroyBody(ball);\r\n      ball = createBall(physicWorld, 2, 3.5, BALL_RADIUS);\r\n      hasBirdOnSlingShot = true;\r\n    }\r\n  });\r\n\r\n  gl.clearColor(0, 0, 0, 1);\r\n  contactListener.BeginContact = function (contact: b2Contact) {\r\n    if (delayTime >= 1) {\r\n      const fixtureAData = contact.GetFixtureA().GetBody().GetUserData();\r\n      const fixtureBData = contact.GetFixtureB().GetBody().GetUserData();\r\n\r\n      // if (fixtureBData !== \"ball\") return;\r\n\r\n      if (fixtureAData.name && fixtureAData.name.startsWith(\"box\")) {\r\n        fixtureAData.durability += 1;\r\n      }\r\n      if (fixtureAData.name && fixtureAData.name.startsWith(\"pig\")) {\r\n        fixtureAData.durability += 1;\r\n      }\r\n    }\r\n    // console.log(\r\n    //   contact.GetFixtureA().GetBody().GetUserData(),\r\n    //   contact.GetFixtureB().GetBody().GetUserData()\r\n    // );\r\n    // console.log(contact);\r\n  };\r\n\r\n  physicWorld.SetContactListener(contactListener);\r\n\r\n  const updateBoxRegionByDurability = (index: number, durability: number) => {\r\n    boxRegions[index] = boxAnimation.getKeyFrame(\r\n      frameDuration * durability,\r\n      PlayMode.NORMAL\r\n    );\r\n  };\r\n  const updatePigRegionByDurability = (index: number, durability: number) => {\r\n    pigRegions[index] = pigAnimation.getKeyFrame(\r\n      frameDuration * durability,\r\n      PlayMode.NORMAL\r\n    );\r\n  };\r\n  createGameLoop((delta: number) => {\r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n\r\n    for (let i = 0; i < boxes.length; i++) {\r\n      const elementBox = boxes[i];\r\n      const boxDurability = elementBox.GetUserData().durability;\r\n      if (typeof boxDurability === \"number\") {\r\n        if (boxDurability <= 4) {\r\n          updateBoxRegionByDurability(i, boxDurability);\r\n        } else {\r\n          physicWorld.DestroyBody(boxes[i]);\r\n          boxes.splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n    for (let i = 0; i < pigs.length; i++) {\r\n      const elementPig = pigs[i];\r\n      const pigDurability = elementPig.GetUserData().durability;\r\n      if (typeof pigDurability === \"number\") {\r\n        if (pigDurability <= 1) {\r\n          updatePigRegionByDurability(i, pigDurability);\r\n        } else {\r\n          physicWorld.DestroyBody(pigs[i]);\r\n          pigs.splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    physicWorld.Step(delta, 8, 3);\r\n    batch.setProjection(camera.combined);\r\n\r\n    shapeRenderer.setProjection(camera.combined);\r\n    shapeRenderer.begin();\r\n\r\n    shapeRenderer.circle(\r\n      true,\r\n      ball.GetPosition().x * METER_TO_WORLD,\r\n      ball.GetPosition().y * METER_TO_WORLD,\r\n      BALL_RADIUS * METER_TO_WORLD,\r\n      Color.RED\r\n    );\r\n    shapeRenderer.end();\r\n\r\n    shapeRenderer.begin();\r\n    shapeRenderer.circle(\r\n      true,\r\n      slingPos.x,\r\n      slingPos.y,\r\n      0.1 * METER_TO_WORLD,\r\n      Color.BLUE\r\n    );\r\n\r\n    shapeRenderer.end();\r\n\r\n    world.setDelta(delta);\r\n    world.processActiveSystem();\r\n    world.processPassiveSystem();\r\n\r\n    batch.begin();\r\n\r\n    for (let i = 0; i < boxes.length; i++) {\r\n      boxRegions[i].draw(\r\n        batch,\r\n        boxes[i].GetPosition().x * METER_TO_WORLD -\r\n          (BOX_SIZE * METER_TO_WORLD) / 2,\r\n        boxes[i].GetPosition().y * METER_TO_WORLD -\r\n          (BOX_SIZE * METER_TO_WORLD) / 2,\r\n        BOX_SIZE * METER_TO_WORLD,\r\n        BOX_SIZE * METER_TO_WORLD\r\n      );\r\n    }\r\n\r\n    batch.draw(\r\n      slingShot,\r\n      2 * METER_TO_WORLD,\r\n      3.5 * METER_TO_WORLD,\r\n      0.25 * METER_TO_WORLD,\r\n      0.7 * METER_TO_WORLD\r\n    );\r\n    for (let i = 0; i < pigs.length; i++) {\r\n      pigRegions[i].draw(\r\n        batch,\r\n        pigs[i].GetPosition().x * METER_TO_WORLD -\r\n          (PIG_SIZE * METER_TO_WORLD) / 2,\r\n        pigs[i].GetPosition().y * METER_TO_WORLD -\r\n          (PIG_SIZE * METER_TO_WORLD) / 2,\r\n        PIG_SIZE * METER_TO_WORLD,\r\n        PIG_SIZE * METER_TO_WORLD\r\n      );\r\n    }\r\n    // console.log(box.GetContactList());\r\n\r\n    batch.draw(\r\n      bird,\r\n      ball.GetPosition().x * METER_TO_WORLD - 25,\r\n      ball.GetPosition().y * METER_TO_WORLD - 25,\r\n      BOX_SIZE * METER_TO_WORLD,\r\n      BOX_SIZE * METER_TO_WORLD\r\n    );\r\n\r\n    delayTime += delta;\r\n    batch.end();\r\n  });\r\n};\r\ninit();\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}