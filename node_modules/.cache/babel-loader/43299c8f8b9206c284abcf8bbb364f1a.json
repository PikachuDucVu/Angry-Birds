{"ast":null,"code":"import { b2BodyDef, b2BodyType, b2CircleShape, b2ContactListener, b2FixtureDef, b2PolygonShape, b2World } from \"box2d.ts\";\nimport { World } from \"flat-ecs\";\nimport { Vector2 } from \"gdxts\";\nimport { Constants } from \"../Constants\";\nimport { BackgroundRenderSystem } from \"../system/BackgroundRenderSystem\";\nimport { BirdRenderSystem } from \"../system/BirdRenderSystem\";\nimport { BoxesAndPigsRenderSystem } from \"../system/BoxesAndPigsRenderSystem\";\nimport { ContactListenerSystem } from \"../system/ContactListenerSystem\";\nimport { inputHandlerSystem } from \"../system/inputHandleSystem\";\nimport { NextLevelSystem } from \"../system/NextLevelSystem\";\nimport { ShapeRendererSystem } from \"../system/ShapeRendererSystem\";\nimport { SlingshotRenderSystem } from \"../system/SlingshotRenderSystem\";\nexport const createGameScreen = async (assetManager, gl, inputHandler, shapeRenderer, camera, batch) => {\n  const createWall = (world, x, y, width, height) => {\n    const bodyDef = new b2BodyDef();\n    bodyDef.type = b2BodyType.b2_staticBody;\n    bodyDef.position.Set(x + width / 2, y + height / 2);\n    const body = world.CreateBody(bodyDef);\n    const shape = new b2PolygonShape();\n    shape.SetAsBox(width / 2, height / 2);\n    body.SetUserData(\"ground\");\n    body.CreateFixture(shape);\n  };\n\n  const createBall = (world, x, y, radius, userData) => {\n    const bodyDef = new b2BodyDef();\n    bodyDef.type = b2BodyType.b2_staticBody;\n    bodyDef.position.Set(x + radius / 2, y + radius / 2);\n    const circle = new b2CircleShape();\n    circle.m_radius = radius;\n    const fixtureDef = new b2FixtureDef();\n    fixtureDef.shape = circle;\n    fixtureDef.restitution = 0.5; // bounce bird\n\n    fixtureDef.friction = 1;\n    fixtureDef.shape = circle;\n    const body = world.CreateBody(bodyDef);\n    body.CreateFixture(fixtureDef);\n    body.SetUserData(userData);\n    return body;\n  };\n\n  const createBox = (world, x, y, width, height, userData) => {\n    const bodyDef = new b2BodyDef();\n    bodyDef.type = b2BodyType.b2_dynamicBody;\n    bodyDef.position.Set(x + width / 2, y + height / 2);\n    const body = world.CreateBody(bodyDef);\n    const shape = new b2PolygonShape();\n    shape.SetAsBox(width * 0.5, height * 0.5);\n    body.SetUserData({\n      name: userData.name,\n      durability: 0\n    });\n    body.CreateFixture(shape);\n    return body;\n  };\n\n  const physicWorld = new b2World({\n    x: 0,\n    y: 10\n  });\n  const BALL_RADIUS = 0.2;\n  const LevelState = {\n    birdCount: 0,\n    conditionWin: false\n  };\n  let offset = 0.5;\n  let birdNumber = 1;\n  let bird = [createBall(physicWorld, 2, 3.45, BALL_RADIUS, \"bird\" + birdNumber++)];\n\n  for (let i = 0; i < 2; i++) {\n    bird.push(createBall(physicWorld, 1.5 - offset * i, 3.85, BALL_RADIUS, \"bird\" + birdNumber++));\n  }\n\n  const mapData = await fetch(\"./untitled.tmj\").then(res => res.json());\n  const wallData = mapData.layers.find(l => l.name === \"walls\").objects;\n\n  for (let wall of wallData) {\n    createWall(physicWorld, wall.x / Constants.METER_TO_WORLD, wall.y / Constants.METER_TO_WORLD, wall.width / Constants.METER_TO_WORLD, wall.height / Constants.METER_TO_WORLD);\n  }\n\n  let delayTime = 0;\n  const BOX_SIZE = 0.5;\n  const PIG_SIZE = 0.3;\n  let pigs = [];\n  let boxes = [];\n  let pigNumber = 0;\n  let boxNumber = 0;\n  let positionBoxX = 6;\n  let positionBoxY = 4.3;\n  let birdOnSlingShot = true;\n  const originPosition = new Vector2(bird[0].GetPosition().x * Constants.METER_TO_WORLD, bird[0].GetPosition().y * Constants.METER_TO_WORLD);\n  let slingPos = new Vector2(bird[0].GetPosition().x * Constants.METER_TO_WORLD, bird[0].GetPosition().y * Constants.METER_TO_WORLD);\n\n  for (let i = 0; i < 3; i++) {\n    positionBoxX = 6 + i * 0.4;\n\n    for (let j = 0; j <= i; j++) {\n      boxes.push(createBox(physicWorld, positionBoxX += 0.51, positionBoxY -= 0.55, BOX_SIZE, BOX_SIZE, {\n        name: `box ${boxNumber++}`\n      }));\n    }\n\n    if (i < 1) {\n      pigs.push(createBox(physicWorld, positionBoxX + 0.5, positionBoxY - 0.25, PIG_SIZE, PIG_SIZE, {\n        name: `pig ${pigNumber++}`\n      }));\n    }\n  }\n\n  const world = new World();\n  const contactListener = new b2ContactListener();\n  gl.clearColor(0, 0, 0, 1);\n  physicWorld.SetContactListener(contactListener);\n  world.register(\"inputHandler\", inputHandler);\n  world.register(\"contactListener\", contactListener);\n  world.register(\"delayTime\", delayTime);\n  world.register(\"gl\", gl);\n  world.register(\"shapeRenderer\", shapeRenderer);\n  world.register(\"assetManager\", assetManager);\n  world.register(\"batch\", batch);\n  world.register(\"bird\", bird);\n  world.register(\"levelState\", LevelState);\n  world.register(\"boxes\", boxes);\n  world.register(\"pigs\", pigs);\n  world.register(\"originPosition\", originPosition);\n  world.register(\"slingPos\", slingPos);\n  world.register(\"physicWorld\", physicWorld);\n  world.register(\"birdOnSlingShot\", birdOnSlingShot);\n  world.register(\"birdNumber\", birdNumber);\n  world.register(\"createBall\", createBall);\n  world.addSystem(new BackgroundRenderSystem(), false);\n  world.addSystem(new ShapeRendererSystem(), false);\n  world.addSystem(new inputHandlerSystem(), false);\n  world.addSystem(new BirdRenderSystem(), false);\n  world.addSystem(new BoxesAndPigsRenderSystem(), false);\n  world.addSystem(new SlingshotRenderSystem(), false);\n  world.addSystem(new ContactListenerSystem(), false);\n  world.addSystem(new NextLevelSystem(), false);\n  return {\n    update(delta) {\n      if (LevelState.conditionWin) {\n        setTimeout(() => {\n          for (let i = 0; i < bird.length; i++) {\n            physicWorld.DestroyBody(bird[i]);\n            bird.splice(i, 1);\n          }\n\n          for (let i = 0; i < boxes.length; i++) {\n            physicWorld.DestroyBody(boxes[i]);\n            boxes.splice(i, 1);\n          }\n        }, 1500);\n\n        if (bird.length === 0) {\n          setTimeout(() => {\n            bird = [createBall(physicWorld, 2, 3.45, BALL_RADIUS, \"bird\" + birdNumber++)];\n            console.log(bird.length);\n          }, 300);\n        }\n      }\n\n      gl.clear(gl.COLOR_BUFFER_BIT);\n      batch.setProjection(camera.combined);\n      shapeRenderer.setProjection(camera.combined);\n      world.setDelta(delta);\n      world.processActiveSystem();\n      world.processPassiveSystem();\n      physicWorld.Step(delta, 8, 3);\n    },\n\n    dispose() {}\n\n  };\n};","map":{"version":3,"names":["b2BodyDef","b2BodyType","b2CircleShape","b2ContactListener","b2FixtureDef","b2PolygonShape","b2World","World","Vector2","Constants","BackgroundRenderSystem","BirdRenderSystem","BoxesAndPigsRenderSystem","ContactListenerSystem","inputHandlerSystem","NextLevelSystem","ShapeRendererSystem","SlingshotRenderSystem","createGameScreen","assetManager","gl","inputHandler","shapeRenderer","camera","batch","createWall","world","x","y","width","height","bodyDef","type","b2_staticBody","position","Set","body","CreateBody","shape","SetAsBox","SetUserData","CreateFixture","createBall","radius","userData","circle","m_radius","fixtureDef","restitution","friction","createBox","b2_dynamicBody","name","durability","physicWorld","BALL_RADIUS","LevelState","birdCount","conditionWin","offset","birdNumber","bird","i","push","mapData","fetch","then","res","json","wallData","layers","find","l","objects","wall","METER_TO_WORLD","delayTime","BOX_SIZE","PIG_SIZE","pigs","boxes","pigNumber","boxNumber","positionBoxX","positionBoxY","birdOnSlingShot","originPosition","GetPosition","slingPos","j","contactListener","clearColor","SetContactListener","register","addSystem","update","delta","setTimeout","length","DestroyBody","splice","console","log","clear","COLOR_BUFFER_BIT","setProjection","combined","setDelta","processActiveSystem","processPassiveSystem","Step","dispose"],"sources":["D:/projects/test-game/src/screen/GameScreen.ts"],"sourcesContent":["import {\r\n  b2Body,\r\n  b2BodyDef,\r\n  b2BodyType,\r\n  b2CircleShape,\r\n  b2ContactListener,\r\n  b2FixtureDef,\r\n  b2PolygonShape,\r\n  b2World,\r\n} from \"box2d.ts\";\r\nimport { World } from \"flat-ecs\";\r\nimport {\r\n  AssetManager,\r\n  createStage,\r\n  createViewport,\r\n  OrthoCamera,\r\n  PolygonBatch,\r\n  Screen,\r\n  ShapeRenderer,\r\n  Vector2,\r\n  ViewportInputHandler,\r\n} from \"gdxts\";\r\nimport { Constants } from \"../Constants\";\r\nimport { Level2System } from \"../data/Level2System\";\r\nimport { LevelState } from \"../data/LevelState\";\r\nimport { BackgroundRenderSystem } from \"../system/BackgroundRenderSystem\";\r\nimport { BirdRenderSystem } from \"../system/BirdRenderSystem\";\r\nimport { BoxesAndPigsRenderSystem } from \"../system/BoxesAndPigsRenderSystem\";\r\nimport { ContactListenerSystem } from \"../system/ContactListenerSystem\";\r\nimport { inputHandlerSystem } from \"../system/inputHandleSystem\";\r\nimport { NextLevelSystem } from \"../system/NextLevelSystem\";\r\nimport { ShapeRendererSystem } from \"../system/ShapeRendererSystem\";\r\nimport { SlingshotRenderSystem } from \"../system/SlingshotRenderSystem\";\r\n\r\nexport const createGameScreen = async (\r\n  assetManager: AssetManager,\r\n  gl: WebGLRenderingContext,\r\n  inputHandler: ViewportInputHandler,\r\n  shapeRenderer: ShapeRenderer,\r\n  camera: OrthoCamera,\r\n  batch: PolygonBatch\r\n): Promise<Screen> => {\r\n  const createWall = (\r\n    world: b2World,\r\n    x: number,\r\n    y: number,\r\n    width: number,\r\n    height: number\r\n  ) => {\r\n    const bodyDef = new b2BodyDef();\r\n    bodyDef.type = b2BodyType.b2_staticBody;\r\n    bodyDef.position.Set(x + width / 2, y + height / 2);\r\n    const body = world.CreateBody(bodyDef);\r\n    const shape = new b2PolygonShape();\r\n    shape.SetAsBox(width / 2, height / 2);\r\n    body.SetUserData(\"ground\");\r\n    body.CreateFixture(shape);\r\n  };\r\n\r\n  const createBall = (\r\n    world: b2World,\r\n    x: number,\r\n    y: number,\r\n    radius: number,\r\n    userData: string\r\n  ): b2Body => {\r\n    const bodyDef = new b2BodyDef();\r\n    bodyDef.type = b2BodyType.b2_staticBody;\r\n    bodyDef.position.Set(x + radius / 2, y + radius / 2);\r\n    const circle = new b2CircleShape();\r\n    circle.m_radius = radius;\r\n    const fixtureDef = new b2FixtureDef();\r\n    fixtureDef.shape = circle;\r\n    fixtureDef.restitution = 0.5; // bounce bird\r\n    fixtureDef.friction = 1;\r\n    fixtureDef.shape = circle;\r\n\r\n    const body = world.CreateBody(bodyDef);\r\n    body.CreateFixture(fixtureDef);\r\n    body.SetUserData(userData);\r\n    return body;\r\n  };\r\n\r\n  const createBox = (\r\n    world: b2World,\r\n    x: number,\r\n    y: number,\r\n    width: number,\r\n    height: number,\r\n    userData: {\r\n      name: string;\r\n    }\r\n  ): b2Body => {\r\n    const bodyDef = new b2BodyDef();\r\n    bodyDef.type = b2BodyType.b2_dynamicBody;\r\n    bodyDef.position.Set(x + width / 2, y + height / 2);\r\n    const body = world.CreateBody(bodyDef);\r\n    const shape = new b2PolygonShape();\r\n    shape.SetAsBox(width * 0.5, height * 0.5);\r\n    body.SetUserData({\r\n      name: userData.name,\r\n      durability: 0,\r\n    });\r\n    body.CreateFixture(shape);\r\n    return body;\r\n  };\r\n  const physicWorld = new b2World({\r\n    x: 0,\r\n    y: 10,\r\n  });\r\n  const BALL_RADIUS = 0.2;\r\n\r\n  const LevelState: LevelState = {\r\n    birdCount: 0,\r\n    conditionWin: false,\r\n  };\r\n\r\n  let offset = 0.5;\r\n  let birdNumber = 1;\r\n  let bird: b2Body[] = [\r\n    createBall(physicWorld, 2, 3.45, BALL_RADIUS, \"bird\" + birdNumber++),\r\n  ];\r\n\r\n  for (let i = 0; i < 2; i++) {\r\n    bird.push(\r\n      createBall(\r\n        physicWorld,\r\n        1.5 - offset * i,\r\n        3.85,\r\n        BALL_RADIUS,\r\n        \"bird\" + birdNumber++\r\n      )\r\n    );\r\n  }\r\n\r\n  const mapData = await fetch(\"./untitled.tmj\").then((res) => res.json());\r\n  const wallData = mapData.layers.find((l: any) => l.name === \"walls\").objects;\r\n  for (let wall of wallData) {\r\n    createWall(\r\n      physicWorld,\r\n      wall.x / Constants.METER_TO_WORLD,\r\n      wall.y / Constants.METER_TO_WORLD,\r\n      wall.width / Constants.METER_TO_WORLD,\r\n      wall.height / Constants.METER_TO_WORLD\r\n    );\r\n  }\r\n\r\n  let delayTime = 0;\r\n  const BOX_SIZE = 0.5;\r\n  const PIG_SIZE = 0.3;\r\n  let pigs: b2Body[] = [];\r\n  let boxes: b2Body[] = [];\r\n  let pigNumber = 0;\r\n  let boxNumber = 0;\r\n  let positionBoxX = 6;\r\n  let positionBoxY = 4.3;\r\n  let birdOnSlingShot = true;\r\n\r\n  const originPosition = new Vector2(\r\n    bird[0].GetPosition().x * Constants.METER_TO_WORLD,\r\n    bird[0].GetPosition().y * Constants.METER_TO_WORLD\r\n  );\r\n  let slingPos = new Vector2(\r\n    bird[0].GetPosition().x * Constants.METER_TO_WORLD,\r\n    bird[0].GetPosition().y * Constants.METER_TO_WORLD\r\n  );\r\n\r\n  for (let i = 0; i < 3; i++) {\r\n    positionBoxX = 6 + i * 0.4;\r\n    for (let j = 0; j <= i; j++) {\r\n      boxes.push(\r\n        createBox(\r\n          physicWorld,\r\n          (positionBoxX += 0.51),\r\n          (positionBoxY -= 0.55),\r\n          BOX_SIZE,\r\n          BOX_SIZE,\r\n          {\r\n            name: `box ${boxNumber++}`,\r\n          }\r\n        )\r\n      );\r\n    }\r\n    if (i < 1) {\r\n      pigs.push(\r\n        createBox(\r\n          physicWorld,\r\n          positionBoxX + 0.5,\r\n          positionBoxY - 0.25,\r\n          PIG_SIZE,\r\n          PIG_SIZE,\r\n          {\r\n            name: `pig ${pigNumber++}`,\r\n          }\r\n        )\r\n      );\r\n    }\r\n  }\r\n\r\n  const world = new World();\r\n  const contactListener = new b2ContactListener();\r\n\r\n  gl.clearColor(0, 0, 0, 1);\r\n  physicWorld.SetContactListener(contactListener);\r\n\r\n  world.register(\"inputHandler\", inputHandler);\r\n  world.register(\"contactListener\", contactListener);\r\n  world.register(\"delayTime\", delayTime);\r\n  world.register(\"gl\", gl);\r\n  world.register(\"shapeRenderer\", shapeRenderer);\r\n  world.register(\"assetManager\", assetManager);\r\n  world.register(\"batch\", batch);\r\n  world.register(\"bird\", bird);\r\n  world.register(\"levelState\", LevelState);\r\n  world.register(\"boxes\", boxes);\r\n  world.register(\"pigs\", pigs);\r\n  world.register(\"originPosition\", originPosition);\r\n  world.register(\"slingPos\", slingPos);\r\n  world.register(\"physicWorld\", physicWorld);\r\n  world.register(\"birdOnSlingShot\", birdOnSlingShot);\r\n  world.register(\"birdNumber\", birdNumber);\r\n  world.register(\"createBall\", createBall);\r\n\r\n  world.addSystem(new BackgroundRenderSystem(), false);\r\n  world.addSystem(new ShapeRendererSystem(), false);\r\n  world.addSystem(new inputHandlerSystem(), false);\r\n  world.addSystem(new BirdRenderSystem(), false);\r\n  world.addSystem(new BoxesAndPigsRenderSystem(), false);\r\n  world.addSystem(new SlingshotRenderSystem(), false);\r\n  world.addSystem(new ContactListenerSystem(), false);\r\n  world.addSystem(new NextLevelSystem(), false);\r\n\r\n  return {\r\n    update(delta: number) {\r\n      if (LevelState.conditionWin) {\r\n        setTimeout(() => {\r\n          for (let i = 0; i < bird.length; i++) {\r\n            physicWorld.DestroyBody(bird[i]);\r\n            bird.splice(i, 1);\r\n          }\r\n          for (let i = 0; i < boxes.length; i++) {\r\n            physicWorld.DestroyBody(boxes[i]);\r\n            boxes.splice(i, 1);\r\n          }\r\n        }, 1500);\r\n        if (bird.length === 0) {\r\n          setTimeout(() => {\r\n            bird = [\r\n              createBall(\r\n                physicWorld,\r\n                2,\r\n                3.45,\r\n                BALL_RADIUS,\r\n                \"bird\" + birdNumber++\r\n              ),\r\n            ];\r\n            console.log(bird.length);\r\n          }, 300);\r\n        }\r\n      }\r\n\r\n      gl.clear(gl.COLOR_BUFFER_BIT);\r\n      batch.setProjection(camera.combined);\r\n      shapeRenderer.setProjection(camera.combined);\r\n      world.setDelta(delta);\r\n      world.processActiveSystem();\r\n      world.processPassiveSystem();\r\n      physicWorld.Step(delta, 8, 3);\r\n    },\r\n    dispose(): void {},\r\n  };\r\n};\r\n"],"mappings":"AAAA,SAEEA,SAFF,EAGEC,UAHF,EAIEC,aAJF,EAKEC,iBALF,EAMEC,YANF,EAOEC,cAPF,EAQEC,OARF,QASO,UATP;AAUA,SAASC,KAAT,QAAsB,UAAtB;AACA,SAQEC,OARF,QAUO,OAVP;AAWA,SAASC,SAAT,QAA0B,cAA1B;AAGA,SAASC,sBAAT,QAAuC,kCAAvC;AACA,SAASC,gBAAT,QAAiC,4BAAjC;AACA,SAASC,wBAAT,QAAyC,oCAAzC;AACA,SAASC,qBAAT,QAAsC,iCAAtC;AACA,SAASC,kBAAT,QAAmC,6BAAnC;AACA,SAASC,eAAT,QAAgC,2BAAhC;AACA,SAASC,mBAAT,QAAoC,+BAApC;AACA,SAASC,qBAAT,QAAsC,iCAAtC;AAEA,OAAO,MAAMC,gBAAgB,GAAG,OAC9BC,YAD8B,EAE9BC,EAF8B,EAG9BC,YAH8B,EAI9BC,aAJ8B,EAK9BC,MAL8B,EAM9BC,KAN8B,KAOV;EACpB,MAAMC,UAAU,GAAG,CACjBC,KADiB,EAEjBC,CAFiB,EAGjBC,CAHiB,EAIjBC,KAJiB,EAKjBC,MALiB,KAMd;IACH,MAAMC,OAAO,GAAG,IAAI/B,SAAJ,EAAhB;IACA+B,OAAO,CAACC,IAAR,GAAe/B,UAAU,CAACgC,aAA1B;IACAF,OAAO,CAACG,QAAR,CAAiBC,GAAjB,CAAqBR,CAAC,GAAGE,KAAK,GAAG,CAAjC,EAAoCD,CAAC,GAAGE,MAAM,GAAG,CAAjD;IACA,MAAMM,IAAI,GAAGV,KAAK,CAACW,UAAN,CAAiBN,OAAjB,CAAb;IACA,MAAMO,KAAK,GAAG,IAAIjC,cAAJ,EAAd;IACAiC,KAAK,CAACC,QAAN,CAAeV,KAAK,GAAG,CAAvB,EAA0BC,MAAM,GAAG,CAAnC;IACAM,IAAI,CAACI,WAAL,CAAiB,QAAjB;IACAJ,IAAI,CAACK,aAAL,CAAmBH,KAAnB;EACD,CAfD;;EAiBA,MAAMI,UAAU,GAAG,CACjBhB,KADiB,EAEjBC,CAFiB,EAGjBC,CAHiB,EAIjBe,MAJiB,EAKjBC,QALiB,KAMN;IACX,MAAMb,OAAO,GAAG,IAAI/B,SAAJ,EAAhB;IACA+B,OAAO,CAACC,IAAR,GAAe/B,UAAU,CAACgC,aAA1B;IACAF,OAAO,CAACG,QAAR,CAAiBC,GAAjB,CAAqBR,CAAC,GAAGgB,MAAM,GAAG,CAAlC,EAAqCf,CAAC,GAAGe,MAAM,GAAG,CAAlD;IACA,MAAME,MAAM,GAAG,IAAI3C,aAAJ,EAAf;IACA2C,MAAM,CAACC,QAAP,GAAkBH,MAAlB;IACA,MAAMI,UAAU,GAAG,IAAI3C,YAAJ,EAAnB;IACA2C,UAAU,CAACT,KAAX,GAAmBO,MAAnB;IACAE,UAAU,CAACC,WAAX,GAAyB,GAAzB,CARW,CAQmB;;IAC9BD,UAAU,CAACE,QAAX,GAAsB,CAAtB;IACAF,UAAU,CAACT,KAAX,GAAmBO,MAAnB;IAEA,MAAMT,IAAI,GAAGV,KAAK,CAACW,UAAN,CAAiBN,OAAjB,CAAb;IACAK,IAAI,CAACK,aAAL,CAAmBM,UAAnB;IACAX,IAAI,CAACI,WAAL,CAAiBI,QAAjB;IACA,OAAOR,IAAP;EACD,CAtBD;;EAwBA,MAAMc,SAAS,GAAG,CAChBxB,KADgB,EAEhBC,CAFgB,EAGhBC,CAHgB,EAIhBC,KAJgB,EAKhBC,MALgB,EAMhBc,QANgB,KASL;IACX,MAAMb,OAAO,GAAG,IAAI/B,SAAJ,EAAhB;IACA+B,OAAO,CAACC,IAAR,GAAe/B,UAAU,CAACkD,cAA1B;IACApB,OAAO,CAACG,QAAR,CAAiBC,GAAjB,CAAqBR,CAAC,GAAGE,KAAK,GAAG,CAAjC,EAAoCD,CAAC,GAAGE,MAAM,GAAG,CAAjD;IACA,MAAMM,IAAI,GAAGV,KAAK,CAACW,UAAN,CAAiBN,OAAjB,CAAb;IACA,MAAMO,KAAK,GAAG,IAAIjC,cAAJ,EAAd;IACAiC,KAAK,CAACC,QAAN,CAAeV,KAAK,GAAG,GAAvB,EAA4BC,MAAM,GAAG,GAArC;IACAM,IAAI,CAACI,WAAL,CAAiB;MACfY,IAAI,EAAER,QAAQ,CAACQ,IADA;MAEfC,UAAU,EAAE;IAFG,CAAjB;IAIAjB,IAAI,CAACK,aAAL,CAAmBH,KAAnB;IACA,OAAOF,IAAP;EACD,CAtBD;;EAuBA,MAAMkB,WAAW,GAAG,IAAIhD,OAAJ,CAAY;IAC9BqB,CAAC,EAAE,CAD2B;IAE9BC,CAAC,EAAE;EAF2B,CAAZ,CAApB;EAIA,MAAM2B,WAAW,GAAG,GAApB;EAEA,MAAMC,UAAsB,GAAG;IAC7BC,SAAS,EAAE,CADkB;IAE7BC,YAAY,EAAE;EAFe,CAA/B;EAKA,IAAIC,MAAM,GAAG,GAAb;EACA,IAAIC,UAAU,GAAG,CAAjB;EACA,IAAIC,IAAc,GAAG,CACnBnB,UAAU,CAACY,WAAD,EAAc,CAAd,EAAiB,IAAjB,EAAuBC,WAAvB,EAAoC,SAASK,UAAU,EAAvD,CADS,CAArB;;EAIA,KAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;IAC1BD,IAAI,CAACE,IAAL,CACErB,UAAU,CACRY,WADQ,EAER,MAAMK,MAAM,GAAGG,CAFP,EAGR,IAHQ,EAIRP,WAJQ,EAKR,SAASK,UAAU,EALX,CADZ;EASD;;EAED,MAAMI,OAAO,GAAG,MAAMC,KAAK,CAAC,gBAAD,CAAL,CAAwBC,IAAxB,CAA8BC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAAtC,CAAtB;EACA,MAAMC,QAAQ,GAAGL,OAAO,CAACM,MAAR,CAAeC,IAAf,CAAqBC,CAAD,IAAYA,CAAC,CAACpB,IAAF,KAAW,OAA3C,EAAoDqB,OAArE;;EACA,KAAK,IAAIC,IAAT,IAAiBL,QAAjB,EAA2B;IACzB5C,UAAU,CACR6B,WADQ,EAERoB,IAAI,CAAC/C,CAAL,GAASlB,SAAS,CAACkE,cAFX,EAGRD,IAAI,CAAC9C,CAAL,GAASnB,SAAS,CAACkE,cAHX,EAIRD,IAAI,CAAC7C,KAAL,GAAapB,SAAS,CAACkE,cAJf,EAKRD,IAAI,CAAC5C,MAAL,GAAcrB,SAAS,CAACkE,cALhB,CAAV;EAOD;;EAED,IAAIC,SAAS,GAAG,CAAhB;EACA,MAAMC,QAAQ,GAAG,GAAjB;EACA,MAAMC,QAAQ,GAAG,GAAjB;EACA,IAAIC,IAAc,GAAG,EAArB;EACA,IAAIC,KAAe,GAAG,EAAtB;EACA,IAAIC,SAAS,GAAG,CAAhB;EACA,IAAIC,SAAS,GAAG,CAAhB;EACA,IAAIC,YAAY,GAAG,CAAnB;EACA,IAAIC,YAAY,GAAG,GAAnB;EACA,IAAIC,eAAe,GAAG,IAAtB;EAEA,MAAMC,cAAc,GAAG,IAAI9E,OAAJ,CACrBqD,IAAI,CAAC,CAAD,CAAJ,CAAQ0B,WAAR,GAAsB5D,CAAtB,GAA0BlB,SAAS,CAACkE,cADf,EAErBd,IAAI,CAAC,CAAD,CAAJ,CAAQ0B,WAAR,GAAsB3D,CAAtB,GAA0BnB,SAAS,CAACkE,cAFf,CAAvB;EAIA,IAAIa,QAAQ,GAAG,IAAIhF,OAAJ,CACbqD,IAAI,CAAC,CAAD,CAAJ,CAAQ0B,WAAR,GAAsB5D,CAAtB,GAA0BlB,SAAS,CAACkE,cADvB,EAEbd,IAAI,CAAC,CAAD,CAAJ,CAAQ0B,WAAR,GAAsB3D,CAAtB,GAA0BnB,SAAS,CAACkE,cAFvB,CAAf;;EAKA,KAAK,IAAIb,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;IAC1BqB,YAAY,GAAG,IAAIrB,CAAC,GAAG,GAAvB;;IACA,KAAK,IAAI2B,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI3B,CAArB,EAAwB2B,CAAC,EAAzB,EAA6B;MAC3BT,KAAK,CAACjB,IAAN,CACEb,SAAS,CACPI,WADO,EAEN6B,YAAY,IAAI,IAFV,EAGNC,YAAY,IAAI,IAHV,EAIPP,QAJO,EAKPA,QALO,EAMP;QACEzB,IAAI,EAAG,OAAM8B,SAAS,EAAG;MAD3B,CANO,CADX;IAYD;;IACD,IAAIpB,CAAC,GAAG,CAAR,EAAW;MACTiB,IAAI,CAAChB,IAAL,CACEb,SAAS,CACPI,WADO,EAEP6B,YAAY,GAAG,GAFR,EAGPC,YAAY,GAAG,IAHR,EAIPN,QAJO,EAKPA,QALO,EAMP;QACE1B,IAAI,EAAG,OAAM6B,SAAS,EAAG;MAD3B,CANO,CADX;IAYD;EACF;;EAED,MAAMvD,KAAK,GAAG,IAAInB,KAAJ,EAAd;EACA,MAAMmF,eAAe,GAAG,IAAIvF,iBAAJ,EAAxB;EAEAiB,EAAE,CAACuE,UAAH,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB;EACArC,WAAW,CAACsC,kBAAZ,CAA+BF,eAA/B;EAEAhE,KAAK,CAACmE,QAAN,CAAe,cAAf,EAA+BxE,YAA/B;EACAK,KAAK,CAACmE,QAAN,CAAe,iBAAf,EAAkCH,eAAlC;EACAhE,KAAK,CAACmE,QAAN,CAAe,WAAf,EAA4BjB,SAA5B;EACAlD,KAAK,CAACmE,QAAN,CAAe,IAAf,EAAqBzE,EAArB;EACAM,KAAK,CAACmE,QAAN,CAAe,eAAf,EAAgCvE,aAAhC;EACAI,KAAK,CAACmE,QAAN,CAAe,cAAf,EAA+B1E,YAA/B;EACAO,KAAK,CAACmE,QAAN,CAAe,OAAf,EAAwBrE,KAAxB;EACAE,KAAK,CAACmE,QAAN,CAAe,MAAf,EAAuBhC,IAAvB;EACAnC,KAAK,CAACmE,QAAN,CAAe,YAAf,EAA6BrC,UAA7B;EACA9B,KAAK,CAACmE,QAAN,CAAe,OAAf,EAAwBb,KAAxB;EACAtD,KAAK,CAACmE,QAAN,CAAe,MAAf,EAAuBd,IAAvB;EACArD,KAAK,CAACmE,QAAN,CAAe,gBAAf,EAAiCP,cAAjC;EACA5D,KAAK,CAACmE,QAAN,CAAe,UAAf,EAA2BL,QAA3B;EACA9D,KAAK,CAACmE,QAAN,CAAe,aAAf,EAA8BvC,WAA9B;EACA5B,KAAK,CAACmE,QAAN,CAAe,iBAAf,EAAkCR,eAAlC;EACA3D,KAAK,CAACmE,QAAN,CAAe,YAAf,EAA6BjC,UAA7B;EACAlC,KAAK,CAACmE,QAAN,CAAe,YAAf,EAA6BnD,UAA7B;EAEAhB,KAAK,CAACoE,SAAN,CAAgB,IAAIpF,sBAAJ,EAAhB,EAA8C,KAA9C;EACAgB,KAAK,CAACoE,SAAN,CAAgB,IAAI9E,mBAAJ,EAAhB,EAA2C,KAA3C;EACAU,KAAK,CAACoE,SAAN,CAAgB,IAAIhF,kBAAJ,EAAhB,EAA0C,KAA1C;EACAY,KAAK,CAACoE,SAAN,CAAgB,IAAInF,gBAAJ,EAAhB,EAAwC,KAAxC;EACAe,KAAK,CAACoE,SAAN,CAAgB,IAAIlF,wBAAJ,EAAhB,EAAgD,KAAhD;EACAc,KAAK,CAACoE,SAAN,CAAgB,IAAI7E,qBAAJ,EAAhB,EAA6C,KAA7C;EACAS,KAAK,CAACoE,SAAN,CAAgB,IAAIjF,qBAAJ,EAAhB,EAA6C,KAA7C;EACAa,KAAK,CAACoE,SAAN,CAAgB,IAAI/E,eAAJ,EAAhB,EAAuC,KAAvC;EAEA,OAAO;IACLgF,MAAM,CAACC,KAAD,EAAgB;MACpB,IAAIxC,UAAU,CAACE,YAAf,EAA6B;QAC3BuC,UAAU,CAAC,MAAM;UACf,KAAK,IAAInC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAAI,CAACqC,MAAzB,EAAiCpC,CAAC,EAAlC,EAAsC;YACpCR,WAAW,CAAC6C,WAAZ,CAAwBtC,IAAI,CAACC,CAAD,CAA5B;YACAD,IAAI,CAACuC,MAAL,CAAYtC,CAAZ,EAAe,CAAf;UACD;;UACD,KAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkB,KAAK,CAACkB,MAA1B,EAAkCpC,CAAC,EAAnC,EAAuC;YACrCR,WAAW,CAAC6C,WAAZ,CAAwBnB,KAAK,CAAClB,CAAD,CAA7B;YACAkB,KAAK,CAACoB,MAAN,CAAatC,CAAb,EAAgB,CAAhB;UACD;QACF,CATS,EASP,IATO,CAAV;;QAUA,IAAID,IAAI,CAACqC,MAAL,KAAgB,CAApB,EAAuB;UACrBD,UAAU,CAAC,MAAM;YACfpC,IAAI,GAAG,CACLnB,UAAU,CACRY,WADQ,EAER,CAFQ,EAGR,IAHQ,EAIRC,WAJQ,EAKR,SAASK,UAAU,EALX,CADL,CAAP;YASAyC,OAAO,CAACC,GAAR,CAAYzC,IAAI,CAACqC,MAAjB;UACD,CAXS,EAWP,GAXO,CAAV;QAYD;MACF;;MAED9E,EAAE,CAACmF,KAAH,CAASnF,EAAE,CAACoF,gBAAZ;MACAhF,KAAK,CAACiF,aAAN,CAAoBlF,MAAM,CAACmF,QAA3B;MACApF,aAAa,CAACmF,aAAd,CAA4BlF,MAAM,CAACmF,QAAnC;MACAhF,KAAK,CAACiF,QAAN,CAAeX,KAAf;MACAtE,KAAK,CAACkF,mBAAN;MACAlF,KAAK,CAACmF,oBAAN;MACAvD,WAAW,CAACwD,IAAZ,CAAiBd,KAAjB,EAAwB,CAAxB,EAA2B,CAA3B;IACD,CApCI;;IAqCLe,OAAO,GAAS,CAAE;;EArCb,CAAP;AAuCD,CA7OM"},"metadata":{},"sourceType":"module"}