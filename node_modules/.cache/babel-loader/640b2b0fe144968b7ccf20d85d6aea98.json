{"ast":null,"code":"import _initializerDefineProperty from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";import _classCallCheck from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _applyDecoratedDescriptor from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";import _initializerWarningHelper from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_class,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6;import{System,Inject}from\"flat-ecs\";export var ContactListenerSystem=(_dec=Inject(\"contactListener\"),_dec2=Inject(\"physicWorld\"),_dec3=Inject(\"delayTime\"),_dec4=Inject(\"birdOnSlingShot\"),_dec5=Inject(\"bird\"),_dec6=Inject(\"levelState\"),(_class=/*#__PURE__*/function(_System){_inherits(ContactListenerSystem,_System);var _super=_createSuper(ContactListenerSystem);function ContactListenerSystem(){var _this;_classCallCheck(this,ContactListenerSystem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_initializerDefineProperty(_this,\"contactListener\",_descriptor,_assertThisInitialized(_this));_initializerDefineProperty(_this,\"physicWorld\",_descriptor2,_assertThisInitialized(_this));_initializerDefineProperty(_this,\"delayTime\",_descriptor3,_assertThisInitialized(_this));_initializerDefineProperty(_this,\"birdOnSlingShot\",_descriptor4,_assertThisInitialized(_this));_initializerDefineProperty(_this,\"bird\",_descriptor5,_assertThisInitialized(_this));_initializerDefineProperty(_this,\"levelState\",_descriptor6,_assertThisInitialized(_this));return _this;}_createClass(ContactListenerSystem,[{key:\"initialized\",value:function initialized(){this.contactListener.BeginContact=function(contact){var fixtureAData=contact.GetFixtureA().GetBody().GetUserData();if(fixtureAData.name&&fixtureAData.name.startsWith(\"box\")){fixtureAData.durability+=1;}if(fixtureAData.name&&fixtureAData.name.startsWith(\"pig\")){fixtureAData.durability+=1;}};this.physicWorld.SetContactListener(this.contactListener);}},{key:\"process\",value:function process(){}}]);return ContactListenerSystem;}(System),(_descriptor=_applyDecoratedDescriptor(_class.prototype,\"contactListener\",[_dec],{configurable:true,enumerable:true,writable:true,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class.prototype,\"physicWorld\",[_dec2],{configurable:true,enumerable:true,writable:true,initializer:null}),_descriptor3=_applyDecoratedDescriptor(_class.prototype,\"delayTime\",[_dec3],{configurable:true,enumerable:true,writable:true,initializer:null}),_descriptor4=_applyDecoratedDescriptor(_class.prototype,\"birdOnSlingShot\",[_dec4],{configurable:true,enumerable:true,writable:true,initializer:null}),_descriptor5=_applyDecoratedDescriptor(_class.prototype,\"bird\",[_dec5],{configurable:true,enumerable:true,writable:true,initializer:null}),_descriptor6=_applyDecoratedDescriptor(_class.prototype,\"levelState\",[_dec6],{configurable:true,enumerable:true,writable:true,initializer:null})),_class));","map":{"version":3,"names":["System","Inject","ContactListenerSystem","contactListener","BeginContact","contact","fixtureAData","GetFixtureA","GetBody","GetUserData","name","startsWith","durability","physicWorld","SetContactListener"],"sources":["D:/projects/test-game/src/system/ContactListenerSystem.ts"],"sourcesContent":["import { b2Body, b2Contact, b2ContactListener, b2World } from \"box2d.ts\";\r\nimport { System, Inject } from \"flat-ecs\";\r\nimport { LevelState } from \"../data/LevelState\";\r\n\r\nexport class ContactListenerSystem extends System {\r\n  @Inject(\"contactListener\") contactListener: b2ContactListener;\r\n  @Inject(\"physicWorld\") physicWorld: b2World;\r\n  @Inject(\"delayTime\") delayTime: number;\r\n  @Inject(\"birdOnSlingShot\") birdOnSlingShot: boolean;\r\n  @Inject(\"bird\") bird: b2Body;\r\n  @Inject(\"levelState\") levelState: LevelState;\r\n\r\n  initialized(): void {\r\n    this.contactListener.BeginContact = function (contact: b2Contact) {\r\n      const fixtureAData = contact.GetFixtureA().GetBody().GetUserData();\r\n      if (fixtureAData.name && fixtureAData.name.startsWith(\"box\")) {\r\n        fixtureAData.durability += 1;\r\n      }\r\n      if (fixtureAData.name && fixtureAData.name.startsWith(\"pig\")) {\r\n        fixtureAData.durability += 1;\r\n      }\r\n    };\r\n    this.physicWorld.SetContactListener(this.contactListener);\r\n  }\r\n\r\n  process(): void {}\r\n}\r\n"],"mappings":"uhCACA,OAASA,MAAT,CAAiBC,MAAjB,KAA+B,UAA/B,CAGA,UAAaC,sBAAb,OACGD,MAAM,CAAC,iBAAD,CADT,OAEGA,MAAM,CAAC,aAAD,CAFT,OAGGA,MAAM,CAAC,WAAD,CAHT,OAIGA,MAAM,CAAC,iBAAD,CAJT,OAKGA,MAAM,CAAC,MAAD,CALT,OAMGA,MAAM,CAAC,YAAD,CANT,69BAQE,sBAAoB,CAClB,KAAKE,eAAL,CAAqBC,YAArB,CAAoC,SAAUC,OAAV,CAA8B,CAChE,GAAMC,aAAY,CAAGD,OAAO,CAACE,WAAR,GAAsBC,OAAtB,GAAgCC,WAAhC,EAArB,CACA,GAAIH,YAAY,CAACI,IAAb,EAAqBJ,YAAY,CAACI,IAAb,CAAkBC,UAAlB,CAA6B,KAA7B,CAAzB,CAA8D,CAC5DL,YAAY,CAACM,UAAb,EAA2B,CAA3B,CACD,CACD,GAAIN,YAAY,CAACI,IAAb,EAAqBJ,YAAY,CAACI,IAAb,CAAkBC,UAAlB,CAA6B,KAA7B,CAAzB,CAA8D,CAC5DL,YAAY,CAACM,UAAb,EAA2B,CAA3B,CACD,CACF,CARD,CASA,KAAKC,WAAL,CAAiBC,kBAAjB,CAAoC,KAAKX,eAAzC,EACD,CAnBH,uBAqBE,kBAAgB,CAAE,CArBpB,mCAA2CH,MAA3C"},"metadata":{},"sourceType":"module"}