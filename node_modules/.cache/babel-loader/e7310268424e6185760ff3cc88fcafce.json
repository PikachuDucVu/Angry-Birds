{"ast":null,"code":"import _initializerDefineProperty from \"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";\nimport _applyDecoratedDescriptor from \"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";\nimport _initializerWarningHelper from \"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";\n\nvar _dec, _dec2, _dec3, _dec4, _class, _descriptor, _descriptor2, _descriptor3, _descriptor4;\n\nimport { System, Inject } from \"flat-ecs\";\nexport let BoxAndPigSystem = (_dec = Inject(\"levelState\"), _dec2 = Inject(\"physicWorld\"), _dec3 = Inject(\"boxes\"), _dec4 = Inject(\"pigs\"), (_class = class BoxAndPigSystem extends System {\n  constructor() {\n    super(...arguments);\n\n    _initializerDefineProperty(this, \"levelState\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"physicWorld\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"boxes\", _descriptor3, this);\n\n    _initializerDefineProperty(this, \"pigs\", _descriptor4, this);\n  }\n\n  process() {\n    for (let i = 0; i < this.pigs.length; i++) {\n      if (this.pigs[i].GetPosition().x * 100 >= 1312) {\n        this.physicWorld.DestroyBody(this.pigs[i]);\n        this.pigs.splice(i, 1);\n\n        if (this.pigs.length === 0) {\n          this.levelState.conditionWin = true;\n        }\n      }\n    }\n\n    for (let i = 0; i < this.boxes.length; i++) {\n      if (typeof this.boxes[i].GetUserData().durability === \"number\") {\n        if (this.boxes[i].GetUserData().durability <= 4) {} else {\n          this.physicWorld.DestroyBody(this.boxes[i]);\n          this.boxes.splice(i, 1);\n        }\n      }\n    }\n\n    for (let i = 0; i < this.pigs.length; i++) {\n      if (typeof this.pigs[i].GetUserData().durability === \"number\") {\n        if (this.pigs[i].GetUserData().durability <= 1) {} else {\n          this.physicWorld.DestroyBody(this.pigs[i]);\n          this.pigs.splice(i, 1);\n\n          if (this.pigs.length === 0) {\n            this.levelState.conditionWin = true;\n          }\n        }\n      }\n    }\n  }\n\n}, (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"levelState\", [_dec], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"physicWorld\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"boxes\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"pigs\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class));","map":{"version":3,"names":["System","Inject","BoxAndPigSystem","process","i","pigs","length","GetPosition","x","physicWorld","DestroyBody","splice","levelState","conditionWin","boxes","GetUserData","durability"],"sources":["D:/projects/test-game/src/system/BoxAndPigSystem.ts"],"sourcesContent":["import { b2Body, b2World } from \"box2d.ts\";\r\nimport { System, Inject } from \"flat-ecs\";\r\nimport { LevelState } from \"../data/LevelState\";\r\n\r\nexport class BoxAndPigSystem extends System {\r\n  @Inject(\"levelState\") levelState: LevelState;\r\n  @Inject(\"physicWorld\") physicWorld: b2World;\r\n  @Inject(\"boxes\") boxes: b2Body[];\r\n  @Inject(\"pigs\") pigs: b2Body[];\r\n\r\n  process(): void {\r\n    for (let i = 0; i < this.pigs.length; i++) {\r\n      if (this.pigs[i].GetPosition().x * 100 >= 1312) {\r\n        this.physicWorld.DestroyBody(this.pigs[i]);\r\n        this.pigs.splice(i, 1);\r\n        if (this.pigs.length === 0) {\r\n          this.levelState.conditionWin = true;\r\n        }\r\n      }\r\n    }\r\n    for (let i = 0; i < this.boxes.length; i++) {\r\n      if (typeof this.boxes[i].GetUserData().durability === \"number\") {\r\n        if (this.boxes[i].GetUserData().durability <= 4) {\r\n        } else {\r\n          this.physicWorld.DestroyBody(this.boxes[i]);\r\n          this.boxes.splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n    for (let i = 0; i < this.pigs.length; i++) {\r\n      if (typeof this.pigs[i].GetUserData().durability === \"number\") {\r\n        if (this.pigs[i].GetUserData().durability <= 1) {\r\n        } else {\r\n          this.physicWorld.DestroyBody(this.pigs[i]);\r\n          this.pigs.splice(i, 1);\r\n          if (this.pigs.length === 0) {\r\n            this.levelState.conditionWin = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;AACA,SAASA,MAAT,EAAiBC,MAAjB,QAA+B,UAA/B;AAGA,WAAaC,eAAb,WACGD,MAAM,CAAC,YAAD,CADT,UAEGA,MAAM,CAAC,aAAD,CAFT,UAGGA,MAAM,CAAC,OAAD,CAHT,UAIGA,MAAM,CAAC,MAAD,CAJT,YAAO,MAAMC,eAAN,SAA8BF,MAA9B,CAAqC;EAAA;IAAA;;IAAA;;IAAA;;IAAA;;IAAA;EAAA;;EAM1CG,OAAO,GAAS;IACd,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKC,IAAL,CAAUC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;MACzC,IAAI,KAAKC,IAAL,CAAUD,CAAV,EAAaG,WAAb,GAA2BC,CAA3B,GAA+B,GAA/B,IAAsC,IAA1C,EAAgD;QAC9C,KAAKC,WAAL,CAAiBC,WAAjB,CAA6B,KAAKL,IAAL,CAAUD,CAAV,CAA7B;QACA,KAAKC,IAAL,CAAUM,MAAV,CAAiBP,CAAjB,EAAoB,CAApB;;QACA,IAAI,KAAKC,IAAL,CAAUC,MAAV,KAAqB,CAAzB,EAA4B;UAC1B,KAAKM,UAAL,CAAgBC,YAAhB,GAA+B,IAA/B;QACD;MACF;IACF;;IACD,KAAK,IAAIT,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKU,KAAL,CAAWR,MAA/B,EAAuCF,CAAC,EAAxC,EAA4C;MAC1C,IAAI,OAAO,KAAKU,KAAL,CAAWV,CAAX,EAAcW,WAAd,GAA4BC,UAAnC,KAAkD,QAAtD,EAAgE;QAC9D,IAAI,KAAKF,KAAL,CAAWV,CAAX,EAAcW,WAAd,GAA4BC,UAA5B,IAA0C,CAA9C,EAAiD,CAChD,CADD,MACO;UACL,KAAKP,WAAL,CAAiBC,WAAjB,CAA6B,KAAKI,KAAL,CAAWV,CAAX,CAA7B;UACA,KAAKU,KAAL,CAAWH,MAAX,CAAkBP,CAAlB,EAAqB,CAArB;QACD;MACF;IACF;;IACD,KAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKC,IAAL,CAAUC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;MACzC,IAAI,OAAO,KAAKC,IAAL,CAAUD,CAAV,EAAaW,WAAb,GAA2BC,UAAlC,KAAiD,QAArD,EAA+D;QAC7D,IAAI,KAAKX,IAAL,CAAUD,CAAV,EAAaW,WAAb,GAA2BC,UAA3B,IAAyC,CAA7C,EAAgD,CAC/C,CADD,MACO;UACL,KAAKP,WAAL,CAAiBC,WAAjB,CAA6B,KAAKL,IAAL,CAAUD,CAAV,CAA7B;UACA,KAAKC,IAAL,CAAUM,MAAV,CAAiBP,CAAjB,EAAoB,CAApB;;UACA,IAAI,KAAKC,IAAL,CAAUC,MAAV,KAAqB,CAAzB,EAA4B;YAC1B,KAAKM,UAAL,CAAgBC,YAAhB,GAA+B,IAA/B;UACD;QACF;MACF;IACF;EACF;;AArCyC,CAA5C;EAAA;EAAA;EAAA;EAAA;AAAA;EAAA;EAAA;EAAA;EAAA;AAAA;EAAA;EAAA;EAAA;EAAA;AAAA;EAAA;EAAA;EAAA;EAAA;AAAA"},"metadata":{},"sourceType":"module"}