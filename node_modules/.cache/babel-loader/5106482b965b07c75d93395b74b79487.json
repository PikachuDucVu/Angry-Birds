{"ast":null,"code":"import { EventEmitter } from 'events';\nexport default class InputHandler {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.lastX = 0;\n    this.lastY = 0;\n    this.touched = false;\n    const emitter = this.emitter = new EventEmitter();\n\n    this.mouseDownHandler = evt => {\n      this.touched = true;\n      this.handleMove(evt);\n      emitter.emit('touchStart', this.getX(), this.getY());\n    };\n\n    this.mouseUpHandler = evt => {\n      this.touched = false;\n      emitter.emit('touchEnd', this.getX(), this.getY());\n    };\n\n    this.mouseMoveHandler = evt => {\n      this.handleMove(evt);\n      emitter.emit('touchMove', this.getX(), this.getY());\n    };\n\n    this.touchStartHandler = evt => {\n      evt.preventDefault(); // TODO: handle multi touch\n\n      let touch = evt.touches[0];\n      this.canvas.dispatchEvent(new MouseEvent('mousedown', {\n        clientX: touch.clientX,\n        clientY: touch.clientY\n      }));\n    };\n\n    this.touchEndHandler = evt => {\n      evt.preventDefault();\n      this.canvas.dispatchEvent(new MouseEvent('mouseup'));\n    };\n\n    this.touchMoveHandler = evt => {\n      evt.preventDefault();\n      let touch = evt.touches[0];\n      this.canvas.dispatchEvent(new MouseEvent('mousemove', {\n        clientX: touch.clientX,\n        clientY: touch.clientY\n      }));\n    };\n\n    this.canvas.addEventListener('mousedown', this.mouseDownHandler, false);\n    this.canvas.addEventListener('mouseup', this.mouseUpHandler, false);\n    this.canvas.addEventListener('mousemove', this.mouseMoveHandler, false);\n    this.canvas.addEventListener('touchstart', this.touchStartHandler, false);\n    this.canvas.addEventListener('touchend', this.touchEndHandler, false);\n    this.canvas.addEventListener('touchmove', this.touchMoveHandler, false);\n  }\n\n  cleanup() {\n    this.canvas.removeEventListener('mousedown', this.mouseDownHandler);\n    this.canvas.removeEventListener('mouseup', this.mouseUpHandler);\n    this.canvas.removeEventListener('mousemove', this.mouseMoveHandler);\n    this.canvas.removeEventListener('touchstart', this.touchStartHandler);\n    this.canvas.removeEventListener('touchend', this.touchEndHandler);\n    this.canvas.removeEventListener('touchmove', this.touchMoveHandler);\n  }\n\n  addEventListener(event, listener) {\n    this.emitter.addListener(event, listener);\n  }\n\n  handleMove(evt) {\n    const rect = this.canvas.getBoundingClientRect();\n    const x = evt.clientX - rect.left;\n    const y = evt.clientY - rect.top;\n    this.lastX = x;\n    this.lastY = y;\n  }\n\n  getX() {\n    return this.lastX;\n  }\n\n  getY() {\n    return this.lastY;\n  }\n\n  isTouched() {\n    return this.touched;\n  }\n\n}","map":{"version":3,"names":["EventEmitter","InputHandler","constructor","canvas","lastX","lastY","touched","emitter","mouseDownHandler","evt","handleMove","emit","getX","getY","mouseUpHandler","mouseMoveHandler","touchStartHandler","preventDefault","touch","touches","dispatchEvent","MouseEvent","clientX","clientY","touchEndHandler","touchMoveHandler","addEventListener","cleanup","removeEventListener","event","listener","addListener","rect","getBoundingClientRect","x","left","y","top","isTouched"],"sources":["D:/projects/test-game/node_modules/gdxjs/lib/InputHandler.js"],"sourcesContent":["import { EventEmitter } from 'events';\nexport default class InputHandler {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.lastX = 0;\n    this.lastY = 0;\n    this.touched = false;\n    const emitter = this.emitter = new EventEmitter();\n\n    this.mouseDownHandler = evt => {\n      this.touched = true;\n      this.handleMove(evt);\n      emitter.emit('touchStart', this.getX(), this.getY());\n    };\n\n    this.mouseUpHandler = evt => {\n      this.touched = false;\n      emitter.emit('touchEnd', this.getX(), this.getY());\n    };\n\n    this.mouseMoveHandler = evt => {\n      this.handleMove(evt);\n      emitter.emit('touchMove', this.getX(), this.getY());\n    };\n\n    this.touchStartHandler = evt => {\n      evt.preventDefault(); // TODO: handle multi touch\n\n      let touch = evt.touches[0];\n      this.canvas.dispatchEvent(new MouseEvent('mousedown', {\n        clientX: touch.clientX,\n        clientY: touch.clientY\n      }));\n    };\n\n    this.touchEndHandler = evt => {\n      evt.preventDefault();\n      this.canvas.dispatchEvent(new MouseEvent('mouseup'));\n    };\n\n    this.touchMoveHandler = evt => {\n      evt.preventDefault();\n      let touch = evt.touches[0];\n      this.canvas.dispatchEvent(new MouseEvent('mousemove', {\n        clientX: touch.clientX,\n        clientY: touch.clientY\n      }));\n    };\n\n    this.canvas.addEventListener('mousedown', this.mouseDownHandler, false);\n    this.canvas.addEventListener('mouseup', this.mouseUpHandler, false);\n    this.canvas.addEventListener('mousemove', this.mouseMoveHandler, false);\n    this.canvas.addEventListener('touchstart', this.touchStartHandler, false);\n    this.canvas.addEventListener('touchend', this.touchEndHandler, false);\n    this.canvas.addEventListener('touchmove', this.touchMoveHandler, false);\n  }\n\n  cleanup() {\n    this.canvas.removeEventListener('mousedown', this.mouseDownHandler);\n    this.canvas.removeEventListener('mouseup', this.mouseUpHandler);\n    this.canvas.removeEventListener('mousemove', this.mouseMoveHandler);\n    this.canvas.removeEventListener('touchstart', this.touchStartHandler);\n    this.canvas.removeEventListener('touchend', this.touchEndHandler);\n    this.canvas.removeEventListener('touchmove', this.touchMoveHandler);\n  }\n\n  addEventListener(event, listener) {\n    this.emitter.addListener(event, listener);\n  }\n\n  handleMove(evt) {\n    const rect = this.canvas.getBoundingClientRect();\n    const x = evt.clientX - rect.left;\n    const y = evt.clientY - rect.top;\n    this.lastX = x;\n    this.lastY = y;\n  }\n\n  getX() {\n    return this.lastX;\n  }\n\n  getY() {\n    return this.lastY;\n  }\n\n  isTouched() {\n    return this.touched;\n  }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}