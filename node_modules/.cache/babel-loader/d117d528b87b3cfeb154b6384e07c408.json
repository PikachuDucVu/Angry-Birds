{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"D:/projects/test-game/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"D:/projects/test-game/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Texture = exports.TextureWrap = exports.TextureFilter = void 0;\n\nvar WebGL_1 = require(\"./WebGL\");\n\nvar TextureFilter;\n\n(function (TextureFilter) {\n  TextureFilter[TextureFilter[\"Nearest\"] = 9728] = \"Nearest\";\n  TextureFilter[TextureFilter[\"Linear\"] = 9729] = \"Linear\";\n  TextureFilter[TextureFilter[\"MipMap\"] = 9987] = \"MipMap\";\n  TextureFilter[TextureFilter[\"MipMapNearestNearest\"] = 9984] = \"MipMapNearestNearest\";\n  TextureFilter[TextureFilter[\"MipMapLinearNearest\"] = 9985] = \"MipMapLinearNearest\";\n  TextureFilter[TextureFilter[\"MipMapNearestLinear\"] = 9986] = \"MipMapNearestLinear\";\n  TextureFilter[TextureFilter[\"MipMapLinearLinear\"] = 9987] = \"MipMapLinearLinear\";\n})(TextureFilter = exports.TextureFilter || (exports.TextureFilter = {}));\n\nvar TextureWrap;\n\n(function (TextureWrap) {\n  TextureWrap[TextureWrap[\"MirroredRepeat\"] = 33648] = \"MirroredRepeat\";\n  TextureWrap[TextureWrap[\"ClampToEdge\"] = 33071] = \"ClampToEdge\";\n  TextureWrap[TextureWrap[\"Repeat\"] = 10497] = \"Repeat\";\n})(TextureWrap = exports.TextureWrap || (exports.TextureWrap = {}));\n\nvar Texture = /*#__PURE__*/function () {\n  function Texture(context, image) {\n    var useMipMaps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    _classCallCheck(this, Texture);\n\n    this.texture = null;\n    this.boundUnit = 0;\n    this.useMipMaps = false;\n    this.width = 0;\n    this.height = 0;\n    this._image = image;\n    this.context = context instanceof WebGL_1.ManagedWebGLRenderingContext ? context : new WebGL_1.ManagedWebGLRenderingContext(context);\n    this.useMipMaps = useMipMaps;\n    this.restore();\n    this.context.addRestorable(this);\n    this.width = image.width;\n    this.height = image.height;\n  }\n\n  _createClass(Texture, [{\n    key: \"getImage\",\n    value: function getImage() {\n      return this._image;\n    }\n  }, {\n    key: \"setFilters\",\n    value: function setFilters(minFilter, magFilter) {\n      var gl = this.context.gl;\n      this.bind();\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, Texture.validateMagFilter(magFilter));\n    }\n  }, {\n    key: \"setWraps\",\n    value: function setWraps(uWrap, vWrap) {\n      var gl = this.context.gl;\n      this.bind();\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, uWrap);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, vWrap);\n    }\n  }, {\n    key: \"update\",\n    value: function update(useMipMaps) {\n      var gl = this.context.gl;\n      if (!this.texture) this.texture = this.context.gl.createTexture();\n      this.bind();\n      if (Texture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL) gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this._image);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, useMipMaps ? gl.LINEAR_MIPMAP_LINEAR : gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      if (useMipMaps) gl.generateMipmap(gl.TEXTURE_2D);\n    }\n  }, {\n    key: \"restore\",\n    value: function restore() {\n      this.texture = null;\n      this.update(this.useMipMaps);\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var unit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var gl = this.context.gl;\n      this.boundUnit = unit;\n      gl.activeTexture(gl.TEXTURE0 + unit);\n      gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var gl = this.context.gl;\n      gl.activeTexture(gl.TEXTURE0 + this.boundUnit);\n      gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.context.removeRestorable(this);\n      var gl = this.context.gl;\n      gl.deleteTexture(this.texture);\n    }\n  }], [{\n    key: \"load\",\n    value: function load(gl, url) {\n      var useMipmaps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      return new Promise(function (resolve) {\n        var image = new Image();\n\n        image.onload = function () {\n          resolve(new Texture(gl, image, useMipmaps));\n        };\n\n        image.src = url;\n      });\n    }\n  }, {\n    key: \"validateMagFilter\",\n    value: function validateMagFilter(magFilter) {\n      switch (magFilter) {\n        case TextureFilter.MipMap:\n        case TextureFilter.MipMapLinearLinear:\n        case TextureFilter.MipMapLinearNearest:\n        case TextureFilter.MipMapNearestLinear:\n        case TextureFilter.MipMapNearestNearest:\n          return TextureFilter.Linear;\n\n        default:\n          return magFilter;\n      }\n    }\n  }]);\n\n  return Texture;\n}();\n\nexports.Texture = Texture;\nTexture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL = false;","map":{"version":3,"names":["Object","defineProperty","exports","value","Texture","TextureWrap","TextureFilter","WebGL_1","require","context","image","useMipMaps","texture","boundUnit","width","height","_image","ManagedWebGLRenderingContext","restore","addRestorable","minFilter","magFilter","gl","bind","texParameteri","TEXTURE_2D","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","validateMagFilter","uWrap","vWrap","TEXTURE_WRAP_S","TEXTURE_WRAP_T","createTexture","DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","LINEAR","LINEAR_MIPMAP_LINEAR","CLAMP_TO_EDGE","generateMipmap","update","unit","activeTexture","TEXTURE0","bindTexture","removeRestorable","deleteTexture","url","useMipmaps","Promise","resolve","Image","onload","src","MipMap","MipMapLinearLinear","MipMapLinearNearest","MipMapNearestLinear","MipMapNearestNearest","Linear"],"sources":["D:/projects/test-game/node_modules/gdxts/dist/lib/Texture.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Texture = exports.TextureWrap = exports.TextureFilter = void 0;\nconst WebGL_1 = require(\"./WebGL\");\nvar TextureFilter;\n(function (TextureFilter) {\n    TextureFilter[TextureFilter[\"Nearest\"] = 9728] = \"Nearest\";\n    TextureFilter[TextureFilter[\"Linear\"] = 9729] = \"Linear\";\n    TextureFilter[TextureFilter[\"MipMap\"] = 9987] = \"MipMap\";\n    TextureFilter[TextureFilter[\"MipMapNearestNearest\"] = 9984] = \"MipMapNearestNearest\";\n    TextureFilter[TextureFilter[\"MipMapLinearNearest\"] = 9985] = \"MipMapLinearNearest\";\n    TextureFilter[TextureFilter[\"MipMapNearestLinear\"] = 9986] = \"MipMapNearestLinear\";\n    TextureFilter[TextureFilter[\"MipMapLinearLinear\"] = 9987] = \"MipMapLinearLinear\";\n})(TextureFilter = exports.TextureFilter || (exports.TextureFilter = {}));\nvar TextureWrap;\n(function (TextureWrap) {\n    TextureWrap[TextureWrap[\"MirroredRepeat\"] = 33648] = \"MirroredRepeat\";\n    TextureWrap[TextureWrap[\"ClampToEdge\"] = 33071] = \"ClampToEdge\";\n    TextureWrap[TextureWrap[\"Repeat\"] = 10497] = \"Repeat\";\n})(TextureWrap = exports.TextureWrap || (exports.TextureWrap = {}));\nclass Texture {\n    constructor(context, image, useMipMaps = false) {\n        this.texture = null;\n        this.boundUnit = 0;\n        this.useMipMaps = false;\n        this.width = 0;\n        this.height = 0;\n        this._image = image;\n        this.context =\n            context instanceof WebGL_1.ManagedWebGLRenderingContext\n                ? context\n                : new WebGL_1.ManagedWebGLRenderingContext(context);\n        this.useMipMaps = useMipMaps;\n        this.restore();\n        this.context.addRestorable(this);\n        this.width = image.width;\n        this.height = image.height;\n    }\n    getImage() {\n        return this._image;\n    }\n    static load(gl, url, useMipmaps = false) {\n        return new Promise((resolve) => {\n            const image = new Image();\n            image.onload = () => {\n                resolve(new Texture(gl, image, useMipmaps));\n            };\n            image.src = url;\n        });\n    }\n    setFilters(minFilter, magFilter) {\n        let gl = this.context.gl;\n        this.bind();\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, Texture.validateMagFilter(magFilter));\n    }\n    static validateMagFilter(magFilter) {\n        switch (magFilter) {\n            case TextureFilter.MipMap:\n            case TextureFilter.MipMapLinearLinear:\n            case TextureFilter.MipMapLinearNearest:\n            case TextureFilter.MipMapNearestLinear:\n            case TextureFilter.MipMapNearestNearest:\n                return TextureFilter.Linear;\n            default:\n                return magFilter;\n        }\n    }\n    setWraps(uWrap, vWrap) {\n        let gl = this.context.gl;\n        this.bind();\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, uWrap);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, vWrap);\n    }\n    update(useMipMaps) {\n        let gl = this.context.gl;\n        if (!this.texture)\n            this.texture = this.context.gl.createTexture();\n        this.bind();\n        if (Texture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL)\n            gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this._image);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, useMipMaps ? gl.LINEAR_MIPMAP_LINEAR : gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        if (useMipMaps)\n            gl.generateMipmap(gl.TEXTURE_2D);\n    }\n    restore() {\n        this.texture = null;\n        this.update(this.useMipMaps);\n    }\n    bind(unit = 0) {\n        let gl = this.context.gl;\n        this.boundUnit = unit;\n        gl.activeTexture(gl.TEXTURE0 + unit);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    }\n    unbind() {\n        let gl = this.context.gl;\n        gl.activeTexture(gl.TEXTURE0 + this.boundUnit);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n    dispose() {\n        this.context.removeRestorable(this);\n        let gl = this.context.gl;\n        gl.deleteTexture(this.texture);\n    }\n}\nexports.Texture = Texture;\nTexture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL = false;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}