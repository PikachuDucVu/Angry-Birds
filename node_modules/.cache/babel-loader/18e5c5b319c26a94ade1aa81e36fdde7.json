{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"D:/projects/test-game/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"D:/projects/test-game/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PolygonBatch = void 0;\n\nvar Utils_1 = require(\"./Utils\");\n\nvar Mesh_1 = require(\"./Mesh\");\n\nvar Shader_1 = require(\"./Shader\");\n\nvar WebGL_1 = require(\"./WebGL\"); // prettier-ignore\n\n\nvar quad = [0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0];\nvar QUAD_TRIANGLES = [0, 1, 2, 2, 3, 0];\nvar WHITE = new Utils_1.Color(1, 1, 1, 1);\n\nvar PolygonBatch = /*#__PURE__*/function () {\n  function PolygonBatch(context) {\n    var twoColorTint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var maxVertices = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10920;\n\n    _classCallCheck(this, PolygonBatch);\n\n    this.isDrawing = false;\n    this.shader = null;\n    this.lastTexture = null;\n    this.verticesLength = 0;\n    this.indicesLength = 0;\n    this.projectionValues = new Float32Array(16);\n    this.color = WHITE;\n    this.twoColorTint = true;\n    if (maxVertices > 10920) throw new Error(\"Can't have more than 10920 triangles per batch: \" + maxVertices);\n    this.context = context instanceof WebGL_1.ManagedWebGLRenderingContext ? context : new WebGL_1.ManagedWebGLRenderingContext(context);\n    var attributes = twoColorTint ? [new Mesh_1.Position2Attribute(), new Mesh_1.ColorAttribute(), new Mesh_1.TexCoordAttribute(), new Mesh_1.Color2Attribute()] : [new Mesh_1.Position2Attribute(), new Mesh_1.ColorAttribute(), new Mesh_1.TexCoordAttribute()];\n    this.mesh = new Mesh_1.Mesh(context, attributes, maxVertices, maxVertices * 3);\n    this.shader = Shader_1.Shader.newTwoColoredTextured(context);\n    var gl = this.context.gl;\n    this.srcColorBlend = gl.SRC_ALPHA;\n    this.srcAlphaBlend = gl.ONE;\n    this.dstBlend = gl.ONE_MINUS_SRC_ALPHA;\n    this.twoColorTint = twoColorTint;\n  }\n\n  _createClass(PolygonBatch, [{\n    key: \"setColor\",\n    value: function setColor(color) {\n      this.color = color;\n    }\n  }, {\n    key: \"setShader\",\n    value: function setShader(shader) {\n      this.shader = shader;\n    }\n  }, {\n    key: \"setProjection\",\n    value: function setProjection(projectionValues) {\n      this.projectionValues = projectionValues;\n    }\n  }, {\n    key: \"begin\",\n    value: function begin() {\n      if (this.isDrawing) throw new Error(\"PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()\");\n      this.drawCalls = 0;\n      var shader = this.shader;\n      this.lastTexture = null;\n      this.isDrawing = true;\n      shader.bind();\n      shader.setUniform4x4f(Shader_1.Shader.MVP_MATRIX, this.projectionValues);\n      shader.setUniformi(\"u_texture\", 0);\n      var gl = this.context.gl;\n      gl.enable(gl.BLEND);\n      gl.blendFuncSeparate(this.srcColorBlend, this.dstBlend, this.srcAlphaBlend, this.dstBlend);\n    }\n  }, {\n    key: \"setBlendMode\",\n    value: function setBlendMode(srcColorBlend, srcAlphaBlend, dstBlend) {\n      if (this.srcColorBlend === srcColorBlend && this.srcAlphaBlend === srcAlphaBlend && this.dstBlend === dstBlend) return;\n      this.srcColorBlend = srcColorBlend;\n      this.srcAlphaBlend = srcAlphaBlend;\n      this.dstBlend = dstBlend;\n\n      if (this.isDrawing) {\n        this.flush();\n        var gl = this.context.gl;\n        gl.blendFuncSeparate(srcColorBlend, dstBlend, srcAlphaBlend, dstBlend);\n      }\n    }\n  }, {\n    key: \"drawVertices\",\n    value: function drawVertices(texture, vertices, indices) {\n      if (texture !== this.lastTexture) {\n        this.flush();\n        this.lastTexture = texture;\n      } else if (this.verticesLength + vertices.length > this.mesh.getVertices().length || this.indicesLength + indices.length > this.mesh.getIndices().length) {\n        this.flush();\n      }\n\n      var indexStart = this.mesh.numVertices();\n      this.mesh.getVertices().set(vertices, this.verticesLength);\n      this.verticesLength += vertices.length;\n      this.mesh.setVerticesLength(this.verticesLength);\n      var indicesArray = this.mesh.getIndices();\n\n      for (var i = this.indicesLength, j = 0; j < indices.length; i++, j++) {\n        indicesArray[i] = indices[j] + indexStart;\n      }\n\n      this.indicesLength += indices.length;\n      this.mesh.setIndicesLength(this.indicesLength);\n    }\n  }, {\n    key: \"flush\",\n    value: function flush() {\n      if (this.verticesLength === 0) return;\n      this.lastTexture.bind();\n      this.mesh.draw(this.shader, this.context.gl.TRIANGLES);\n      this.verticesLength = 0;\n      this.indicesLength = 0;\n      this.mesh.setVerticesLength(0);\n      this.mesh.setIndicesLength(0);\n      this.drawCalls++;\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      if (!this.isDrawing) throw new Error(\"PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()\");\n      if (this.verticesLength > 0 || this.indicesLength > 0) this.flush();\n      this.shader.unbind();\n      this.lastTexture = null;\n      this.isDrawing = false;\n      var gl = this.context.gl;\n      gl.disable(gl.BLEND);\n    }\n  }, {\n    key: \"getDrawCalls\",\n    value: function getDrawCalls() {\n      return this.drawCalls;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.mesh.dispose();\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(texture, x, y, width, height) {\n      var originX = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n      var originY = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var rotation = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n      var scaleX = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 1;\n      var scaleY = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 1;\n      var u1 = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : 0;\n      var v1 = arguments.length > 11 && arguments[11] !== undefined ? arguments[11] : 1;\n      var u2 = arguments.length > 12 && arguments[12] !== undefined ? arguments[12] : 1;\n      var v2 = arguments.length > 13 && arguments[13] !== undefined ? arguments[13] : 0;\n      var color = this.color;\n      width = width === 0 ? width : width || texture.width;\n      height = height === 0 ? height : height || texture.height;\n      x = x || 0;\n      y = y || 0;\n      var x1 = -originX;\n      var x2 = width - originX;\n      var x3 = width - originX;\n      var x4 = -originX;\n      var y1 = -originY;\n      var y2 = -originY;\n      var y3 = height - originY;\n      var y4 = height - originY;\n\n      if (scaleX !== 1) {\n        x1 = x1 * scaleX;\n        x2 = x2 * scaleX;\n        x3 = x3 * scaleX;\n        x4 = x4 * scaleX;\n      }\n\n      if (scaleY !== 1) {\n        y1 = y1 * scaleY;\n        y2 = y2 * scaleY;\n        y3 = y3 * scaleY;\n        y4 = y4 * scaleY;\n      }\n\n      if (rotation !== 0) {\n        var cos = Math.cos(rotation);\n        var sin = Math.sin(rotation);\n        var rotatedX1 = cos * x1 - sin * y1;\n        var rotatedY1 = sin * x1 + cos * y1;\n        var rotatedX2 = cos * x2 - sin * y2;\n        var rotatedY2 = sin * x2 + cos * y2;\n        var rotatedX3 = cos * x3 - sin * y3;\n        var rotatedY3 = sin * x3 + cos * y3;\n        var rotatedX4 = cos * x4 - sin * y4;\n        var rotatedY4 = sin * x4 + cos * y4;\n        x1 = rotatedX1;\n        x2 = rotatedX2;\n        x3 = rotatedX3;\n        x4 = rotatedX4;\n        y1 = rotatedY1;\n        y2 = rotatedY2;\n        y3 = rotatedY3;\n        y4 = rotatedY4;\n      }\n\n      x1 += x + originX;\n      x2 += x + originX;\n      x3 += x + originX;\n      x4 += x + originX;\n      y1 += y + originY;\n      y2 += y + originY;\n      y3 += y + originY;\n      y4 += y + originY;\n      var i = 0;\n      quad[i++] = x1;\n      quad[i++] = y1;\n      quad[i++] = color.r;\n      quad[i++] = color.g;\n      quad[i++] = color.b;\n      quad[i++] = color.a;\n      quad[i++] = u1;\n      quad[i++] = v1;\n\n      if (this.twoColorTint) {\n        quad[i++] = 0;\n        quad[i++] = 0;\n        quad[i++] = 0;\n        quad[i++] = 0;\n      }\n\n      quad[i++] = x2;\n      quad[i++] = y2;\n      quad[i++] = color.r;\n      quad[i++] = color.g;\n      quad[i++] = color.b;\n      quad[i++] = color.a;\n      quad[i++] = u2;\n      quad[i++] = v1;\n\n      if (this.twoColorTint) {\n        quad[i++] = 0;\n        quad[i++] = 0;\n        quad[i++] = 0;\n        quad[i++] = 0;\n      }\n\n      quad[i++] = x3;\n      quad[i++] = y3;\n      quad[i++] = color.r;\n      quad[i++] = color.g;\n      quad[i++] = color.b;\n      quad[i++] = color.a;\n      quad[i++] = u2;\n      quad[i++] = v2;\n\n      if (this.twoColorTint) {\n        quad[i++] = 0;\n        quad[i++] = 0;\n        quad[i++] = 0;\n        quad[i++] = 0;\n      }\n\n      quad[i++] = x4;\n      quad[i++] = y4;\n      quad[i++] = color.r;\n      quad[i++] = color.g;\n      quad[i++] = color.b;\n      quad[i++] = color.a;\n      quad[i++] = u1;\n      quad[i++] = v2;\n\n      if (this.twoColorTint) {\n        quad[i++] = 0;\n        quad[i++] = 0;\n        quad[i++] = 0;\n        quad[i] = 0;\n      }\n\n      this.drawVertices(texture, quad, QUAD_TRIANGLES);\n    }\n  }]);\n\n  return PolygonBatch;\n}();\n\nexports.PolygonBatch = PolygonBatch;","map":{"version":3,"names":["Object","defineProperty","exports","value","PolygonBatch","Utils_1","require","Mesh_1","Shader_1","WebGL_1","quad","QUAD_TRIANGLES","WHITE","Color","context","twoColorTint","maxVertices","isDrawing","shader","lastTexture","verticesLength","indicesLength","projectionValues","Float32Array","color","Error","ManagedWebGLRenderingContext","attributes","Position2Attribute","ColorAttribute","TexCoordAttribute","Color2Attribute","mesh","Mesh","Shader","newTwoColoredTextured","gl","srcColorBlend","SRC_ALPHA","srcAlphaBlend","ONE","dstBlend","ONE_MINUS_SRC_ALPHA","drawCalls","bind","setUniform4x4f","MVP_MATRIX","setUniformi","enable","BLEND","blendFuncSeparate","flush","texture","vertices","indices","length","getVertices","getIndices","indexStart","numVertices","set","setVerticesLength","indicesArray","i","j","setIndicesLength","draw","TRIANGLES","unbind","disable","dispose","x","y","width","height","originX","originY","rotation","scaleX","scaleY","u1","v1","u2","v2","x1","x2","x3","x4","y1","y2","y3","y4","cos","Math","sin","rotatedX1","rotatedY1","rotatedX2","rotatedY2","rotatedX3","rotatedY3","rotatedX4","rotatedY4","r","g","b","a","drawVertices"],"sources":["D:/projects/test-game/node_modules/gdxts/dist/lib/PolygonBatcher.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PolygonBatch = void 0;\nconst Utils_1 = require(\"./Utils\");\nconst Mesh_1 = require(\"./Mesh\");\nconst Shader_1 = require(\"./Shader\");\nconst WebGL_1 = require(\"./WebGL\");\n// prettier-ignore\nconst quad = [\n    0, 0, 1, 1, 1, 1, 0, 0,\n    0, 0, 1, 1, 1, 1, 0, 0,\n    0, 0, 1, 1, 1, 1, 0, 0,\n    0, 0, 1, 1, 1, 1, 0, 0,\n];\nconst QUAD_TRIANGLES = [0, 1, 2, 2, 3, 0];\nconst WHITE = new Utils_1.Color(1, 1, 1, 1);\nclass PolygonBatch {\n    constructor(context, twoColorTint = true, maxVertices = 10920) {\n        this.isDrawing = false;\n        this.shader = null;\n        this.lastTexture = null;\n        this.verticesLength = 0;\n        this.indicesLength = 0;\n        this.projectionValues = new Float32Array(16);\n        this.color = WHITE;\n        this.twoColorTint = true;\n        if (maxVertices > 10920)\n            throw new Error(\"Can't have more than 10920 triangles per batch: \" + maxVertices);\n        this.context =\n            context instanceof WebGL_1.ManagedWebGLRenderingContext\n                ? context\n                : new WebGL_1.ManagedWebGLRenderingContext(context);\n        let attributes = twoColorTint\n            ? [\n                new Mesh_1.Position2Attribute(),\n                new Mesh_1.ColorAttribute(),\n                new Mesh_1.TexCoordAttribute(),\n                new Mesh_1.Color2Attribute(),\n            ]\n            : [\n                new Mesh_1.Position2Attribute(),\n                new Mesh_1.ColorAttribute(),\n                new Mesh_1.TexCoordAttribute(),\n            ];\n        this.mesh = new Mesh_1.Mesh(context, attributes, maxVertices, maxVertices * 3);\n        this.shader = Shader_1.Shader.newTwoColoredTextured(context);\n        let gl = this.context.gl;\n        this.srcColorBlend = gl.SRC_ALPHA;\n        this.srcAlphaBlend = gl.ONE;\n        this.dstBlend = gl.ONE_MINUS_SRC_ALPHA;\n        this.twoColorTint = twoColorTint;\n    }\n    setColor(color) {\n        this.color = color;\n    }\n    setShader(shader) {\n        this.shader = shader;\n    }\n    setProjection(projectionValues) {\n        this.projectionValues = projectionValues;\n    }\n    begin() {\n        if (this.isDrawing)\n            throw new Error(\"PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()\");\n        this.drawCalls = 0;\n        const shader = this.shader;\n        this.lastTexture = null;\n        this.isDrawing = true;\n        shader.bind();\n        shader.setUniform4x4f(Shader_1.Shader.MVP_MATRIX, this.projectionValues);\n        shader.setUniformi(\"u_texture\", 0);\n        let gl = this.context.gl;\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(this.srcColorBlend, this.dstBlend, this.srcAlphaBlend, this.dstBlend);\n    }\n    setBlendMode(srcColorBlend, srcAlphaBlend, dstBlend) {\n        if (this.srcColorBlend === srcColorBlend &&\n            this.srcAlphaBlend === srcAlphaBlend &&\n            this.dstBlend === dstBlend)\n            return;\n        this.srcColorBlend = srcColorBlend;\n        this.srcAlphaBlend = srcAlphaBlend;\n        this.dstBlend = dstBlend;\n        if (this.isDrawing) {\n            this.flush();\n            let gl = this.context.gl;\n            gl.blendFuncSeparate(srcColorBlend, dstBlend, srcAlphaBlend, dstBlend);\n        }\n    }\n    drawVertices(texture, vertices, indices) {\n        if (texture !== this.lastTexture) {\n            this.flush();\n            this.lastTexture = texture;\n        }\n        else if (this.verticesLength + vertices.length > this.mesh.getVertices().length ||\n            this.indicesLength + indices.length > this.mesh.getIndices().length) {\n            this.flush();\n        }\n        let indexStart = this.mesh.numVertices();\n        this.mesh.getVertices().set(vertices, this.verticesLength);\n        this.verticesLength += vertices.length;\n        this.mesh.setVerticesLength(this.verticesLength);\n        let indicesArray = this.mesh.getIndices();\n        for (let i = this.indicesLength, j = 0; j < indices.length; i++, j++)\n            indicesArray[i] = indices[j] + indexStart;\n        this.indicesLength += indices.length;\n        this.mesh.setIndicesLength(this.indicesLength);\n    }\n    flush() {\n        if (this.verticesLength === 0)\n            return;\n        this.lastTexture.bind();\n        this.mesh.draw(this.shader, this.context.gl.TRIANGLES);\n        this.verticesLength = 0;\n        this.indicesLength = 0;\n        this.mesh.setVerticesLength(0);\n        this.mesh.setIndicesLength(0);\n        this.drawCalls++;\n    }\n    end() {\n        if (!this.isDrawing)\n            throw new Error(\"PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()\");\n        if (this.verticesLength > 0 || this.indicesLength > 0)\n            this.flush();\n        this.shader.unbind();\n        this.lastTexture = null;\n        this.isDrawing = false;\n        let gl = this.context.gl;\n        gl.disable(gl.BLEND);\n    }\n    getDrawCalls() {\n        return this.drawCalls;\n    }\n    dispose() {\n        this.mesh.dispose();\n    }\n    draw(texture, x, y, width, height, originX = 0, originY = 0, rotation = 0, scaleX = 1, scaleY = 1, u1 = 0, v1 = 1, u2 = 1, v2 = 0) {\n        const color = this.color;\n        width = width === 0 ? width : width || texture.width;\n        height = height === 0 ? height : height || texture.height;\n        x = x || 0;\n        y = y || 0;\n        let x1 = -originX;\n        let x2 = width - originX;\n        let x3 = width - originX;\n        let x4 = -originX;\n        let y1 = -originY;\n        let y2 = -originY;\n        let y3 = height - originY;\n        let y4 = height - originY;\n        if (scaleX !== 1) {\n            x1 = x1 * scaleX;\n            x2 = x2 * scaleX;\n            x3 = x3 * scaleX;\n            x4 = x4 * scaleX;\n        }\n        if (scaleY !== 1) {\n            y1 = y1 * scaleY;\n            y2 = y2 * scaleY;\n            y3 = y3 * scaleY;\n            y4 = y4 * scaleY;\n        }\n        if (rotation !== 0) {\n            var cos = Math.cos(rotation);\n            var sin = Math.sin(rotation);\n            var rotatedX1 = cos * x1 - sin * y1;\n            var rotatedY1 = sin * x1 + cos * y1;\n            var rotatedX2 = cos * x2 - sin * y2;\n            var rotatedY2 = sin * x2 + cos * y2;\n            var rotatedX3 = cos * x3 - sin * y3;\n            var rotatedY3 = sin * x3 + cos * y3;\n            var rotatedX4 = cos * x4 - sin * y4;\n            var rotatedY4 = sin * x4 + cos * y4;\n            x1 = rotatedX1;\n            x2 = rotatedX2;\n            x3 = rotatedX3;\n            x4 = rotatedX4;\n            y1 = rotatedY1;\n            y2 = rotatedY2;\n            y3 = rotatedY3;\n            y4 = rotatedY4;\n        }\n        x1 += x + originX;\n        x2 += x + originX;\n        x3 += x + originX;\n        x4 += x + originX;\n        y1 += y + originY;\n        y2 += y + originY;\n        y3 += y + originY;\n        y4 += y + originY;\n        var i = 0;\n        quad[i++] = x1;\n        quad[i++] = y1;\n        quad[i++] = color.r;\n        quad[i++] = color.g;\n        quad[i++] = color.b;\n        quad[i++] = color.a;\n        quad[i++] = u1;\n        quad[i++] = v1;\n        if (this.twoColorTint) {\n            quad[i++] = 0;\n            quad[i++] = 0;\n            quad[i++] = 0;\n            quad[i++] = 0;\n        }\n        quad[i++] = x2;\n        quad[i++] = y2;\n        quad[i++] = color.r;\n        quad[i++] = color.g;\n        quad[i++] = color.b;\n        quad[i++] = color.a;\n        quad[i++] = u2;\n        quad[i++] = v1;\n        if (this.twoColorTint) {\n            quad[i++] = 0;\n            quad[i++] = 0;\n            quad[i++] = 0;\n            quad[i++] = 0;\n        }\n        quad[i++] = x3;\n        quad[i++] = y3;\n        quad[i++] = color.r;\n        quad[i++] = color.g;\n        quad[i++] = color.b;\n        quad[i++] = color.a;\n        quad[i++] = u2;\n        quad[i++] = v2;\n        if (this.twoColorTint) {\n            quad[i++] = 0;\n            quad[i++] = 0;\n            quad[i++] = 0;\n            quad[i++] = 0;\n        }\n        quad[i++] = x4;\n        quad[i++] = y4;\n        quad[i++] = color.r;\n        quad[i++] = color.g;\n        quad[i++] = color.b;\n        quad[i++] = color.a;\n        quad[i++] = u1;\n        quad[i++] = v2;\n        if (this.twoColorTint) {\n            quad[i++] = 0;\n            quad[i++] = 0;\n            quad[i++] = 0;\n            quad[i] = 0;\n        }\n        this.drawVertices(texture, quad, QUAD_TRIANGLES);\n    }\n}\nexports.PolygonBatch = PolygonBatch;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}