{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"D:/projects/test-game/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"D:/projects/test-game/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ViewportInputHandler = void 0;\n\nvar InputHandler_1 = require(\"./InputHandler\");\n\nvar Utils_1 = require(\"./Utils\");\n\nvar createViewportAwareInputListener = function createViewportAwareInputListener(handler, viewport) {\n  return function (x, y) {\n    var _viewport$getViewport = viewport.getViewportInfo(),\n        vX = _viewport$getViewport.x,\n        vY = _viewport$getViewport.y,\n        pixelRatio = _viewport$getViewport.pixelRatio;\n\n    x = x * pixelRatio - vX;\n    y = y * pixelRatio - vY;\n    handler(x, y);\n  };\n};\n\nvar ViewportInputHandler = /*#__PURE__*/function () {\n  function ViewportInputHandler(viewport) {\n    _classCallCheck(this, ViewportInputHandler);\n\n    this.screenCoord = new Utils_1.Vector2();\n    this.worldCoord = new Utils_1.Vector2();\n    this.viewport = viewport;\n    this.canvas = viewport.getCanvas();\n    this.inputHandler = new InputHandler_1.InputHandler(this.canvas);\n  }\n\n  _createClass(ViewportInputHandler, [{\n    key: \"isTouched\",\n    value: function isTouched() {\n      return this.inputHandler.isTouched();\n    }\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {\n      this.inputHandler.cleanup();\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(event, listener) {\n      this.inputHandler.addEventListener(event, createViewportAwareInputListener(listener, this.viewport));\n    }\n  }, {\n    key: \"getX\",\n    value: function getX() {\n      var _this$viewport$getVie = this.viewport.getViewportInfo(),\n          vX = _this$viewport$getVie.x,\n          pixelRatio = _this$viewport$getVie.pixelRatio;\n\n      return this.inputHandler.getX() * pixelRatio - vX;\n    }\n  }, {\n    key: \"getY\",\n    value: function getY() {\n      var _this$viewport$getVie2 = this.viewport.getViewportInfo(),\n          vY = _this$viewport$getVie2.y,\n          pixelRatio = _this$viewport$getVie2.pixelRatio;\n\n      return this.inputHandler.getY() * pixelRatio - vY;\n    }\n  }, {\n    key: \"getTouchedWorldCoord\",\n    value: function getTouchedWorldCoord(camera) {\n      if (!camera) {\n        camera = this.viewport.getCamera();\n      }\n\n      this.screenCoord.set(this.getX(), this.getY());\n      camera.unprojectVector2(this.worldCoord, this.screenCoord);\n      return this.worldCoord;\n    }\n  }]);\n\n  return ViewportInputHandler;\n}();\n\nexports.ViewportInputHandler = ViewportInputHandler;","map":{"version":3,"names":["Object","defineProperty","exports","value","ViewportInputHandler","InputHandler_1","require","Utils_1","createViewportAwareInputListener","handler","viewport","x","y","getViewportInfo","vX","vY","pixelRatio","screenCoord","Vector2","worldCoord","canvas","getCanvas","inputHandler","InputHandler","isTouched","cleanup","event","listener","addEventListener","getX","getY","camera","getCamera","set","unprojectVector2"],"sources":["D:/projects/test-game/node_modules/gdxts/dist/lib/ViewportInputHandler.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ViewportInputHandler = void 0;\nconst InputHandler_1 = require(\"./InputHandler\");\nconst Utils_1 = require(\"./Utils\");\nconst createViewportAwareInputListener = (handler, viewport) => {\n    return (x, y) => {\n        const { x: vX, y: vY, pixelRatio } = viewport.getViewportInfo();\n        x = x * pixelRatio - vX;\n        y = y * pixelRatio - vY;\n        handler(x, y);\n    };\n};\nclass ViewportInputHandler {\n    constructor(viewport) {\n        this.screenCoord = new Utils_1.Vector2();\n        this.worldCoord = new Utils_1.Vector2();\n        this.viewport = viewport;\n        this.canvas = viewport.getCanvas();\n        this.inputHandler = new InputHandler_1.InputHandler(this.canvas);\n    }\n    isTouched() {\n        return this.inputHandler.isTouched();\n    }\n    cleanup() {\n        this.inputHandler.cleanup();\n    }\n    addEventListener(event, listener) {\n        this.inputHandler.addEventListener(event, createViewportAwareInputListener(listener, this.viewport));\n    }\n    getX() {\n        const { x: vX, pixelRatio } = this.viewport.getViewportInfo();\n        return this.inputHandler.getX() * pixelRatio - vX;\n    }\n    getY() {\n        const { y: vY, pixelRatio } = this.viewport.getViewportInfo();\n        return this.inputHandler.getY() * pixelRatio - vY;\n    }\n    getTouchedWorldCoord(camera) {\n        if (!camera) {\n            camera = this.viewport.getCamera();\n        }\n        this.screenCoord.set(this.getX(), this.getY());\n        camera.unprojectVector2(this.worldCoord, this.screenCoord);\n        return this.worldCoord;\n    }\n}\nexports.ViewportInputHandler = ViewportInputHandler;\n"],"mappings":"AAAA;;;;;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,oBAAR,GAA+B,KAAK,CAApC;;AACA,IAAMC,cAAc,GAAGC,OAAO,CAAC,gBAAD,CAA9B;;AACA,IAAMC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAME,gCAAgC,GAAG,SAAnCA,gCAAmC,CAACC,OAAD,EAAUC,QAAV,EAAuB;EAC5D,OAAO,UAACC,CAAD,EAAIC,CAAJ,EAAU;IACb,4BAAqCF,QAAQ,CAACG,eAAT,EAArC;IAAA,IAAWC,EAAX,yBAAQH,CAAR;IAAA,IAAkBI,EAAlB,yBAAeH,CAAf;IAAA,IAAsBI,UAAtB,yBAAsBA,UAAtB;;IACAL,CAAC,GAAGA,CAAC,GAAGK,UAAJ,GAAiBF,EAArB;IACAF,CAAC,GAAGA,CAAC,GAAGI,UAAJ,GAAiBD,EAArB;IACAN,OAAO,CAACE,CAAD,EAAIC,CAAJ,CAAP;EACH,CALD;AAMH,CAPD;;IAQMR,oB;EACF,8BAAYM,QAAZ,EAAsB;IAAA;;IAClB,KAAKO,WAAL,GAAmB,IAAIV,OAAO,CAACW,OAAZ,EAAnB;IACA,KAAKC,UAAL,GAAkB,IAAIZ,OAAO,CAACW,OAAZ,EAAlB;IACA,KAAKR,QAAL,GAAgBA,QAAhB;IACA,KAAKU,MAAL,GAAcV,QAAQ,CAACW,SAAT,EAAd;IACA,KAAKC,YAAL,GAAoB,IAAIjB,cAAc,CAACkB,YAAnB,CAAgC,KAAKH,MAArC,CAApB;EACH;;;;WACD,qBAAY;MACR,OAAO,KAAKE,YAAL,CAAkBE,SAAlB,EAAP;IACH;;;WACD,mBAAU;MACN,KAAKF,YAAL,CAAkBG,OAAlB;IACH;;;WACD,0BAAiBC,KAAjB,EAAwBC,QAAxB,EAAkC;MAC9B,KAAKL,YAAL,CAAkBM,gBAAlB,CAAmCF,KAAnC,EAA0ClB,gCAAgC,CAACmB,QAAD,EAAW,KAAKjB,QAAhB,CAA1E;IACH;;;WACD,gBAAO;MACH,4BAA8B,KAAKA,QAAL,CAAcG,eAAd,EAA9B;MAAA,IAAWC,EAAX,yBAAQH,CAAR;MAAA,IAAeK,UAAf,yBAAeA,UAAf;;MACA,OAAO,KAAKM,YAAL,CAAkBO,IAAlB,KAA2Bb,UAA3B,GAAwCF,EAA/C;IACH;;;WACD,gBAAO;MACH,6BAA8B,KAAKJ,QAAL,CAAcG,eAAd,EAA9B;MAAA,IAAWE,EAAX,0BAAQH,CAAR;MAAA,IAAeI,UAAf,0BAAeA,UAAf;;MACA,OAAO,KAAKM,YAAL,CAAkBQ,IAAlB,KAA2Bd,UAA3B,GAAwCD,EAA/C;IACH;;;WACD,8BAAqBgB,MAArB,EAA6B;MACzB,IAAI,CAACA,MAAL,EAAa;QACTA,MAAM,GAAG,KAAKrB,QAAL,CAAcsB,SAAd,EAAT;MACH;;MACD,KAAKf,WAAL,CAAiBgB,GAAjB,CAAqB,KAAKJ,IAAL,EAArB,EAAkC,KAAKC,IAAL,EAAlC;MACAC,MAAM,CAACG,gBAAP,CAAwB,KAAKf,UAA7B,EAAyC,KAAKF,WAA9C;MACA,OAAO,KAAKE,UAAZ;IACH;;;;;;AAELjB,OAAO,CAACE,oBAAR,GAA+BA,oBAA/B"},"metadata":{},"sourceType":"script"}