{"ast":null,"code":"import { mat4 } from 'gl-matrix';\nimport { unproject } from 'gdxjs/lib/mathUtils';\nimport Vector2 from './Vector2';\nexport default ((width, height, viewportWidth, viewportHeight) => {\n  const combined = mat4.create();\n  const transform = mat4.create();\n  const invOrtho = mat4.create();\n  const zoom = mat4.create();\n  const lookAtMatrix = mat4.create();\n  const position = new Vector2(0, 0);\n  const NEAR = 0;\n  const FAR = 1;\n  const tmp3 = [0, 0, 0];\n  const eye = [0, 0, FAR];\n  const center = [0, 0, NEAR];\n  const up = [0, 1, 0];\n\n  const update = () => {\n    mat4.ortho(combined, 0, width, height, 0, NEAR, FAR);\n    const x = position.x;\n    const y = position.y;\n    eye[0] = center[0] = x;\n    eye[1] = center[1] = y;\n    mat4.identity(transform);\n    mat4.lookAt(lookAtMatrix, eye, center, up);\n    mat4.mul(transform, transform, lookAtMatrix);\n    mat4.mul(transform, transform, zoom);\n    mat4.mul(combined, combined, transform);\n    mat4.invert(invOrtho, combined);\n  };\n\n  update();\n  return {\n    combined,\n\n    getPosition() {\n      return position;\n    },\n\n    zoomTo(x, y, scale) {\n      mat4.translate(zoom, zoom, [x, y, 0]);\n      mat4.scale(zoom, zoom, [scale, scale, 1]);\n      mat4.translate(zoom, zoom, [-x, -y, 0]);\n      update();\n    },\n\n    setMatrix(mat) {\n      mat4.copy(combined, mat);\n      mat4.invert(invOrtho, combined);\n    },\n\n    setYUp(yUp) {\n      if (yUp) {\n        up[1] = -1;\n      } else {\n        up[1] = 1;\n      }\n\n      update();\n    },\n\n    setPosition(x, y) {\n      position.set(x, y);\n      update();\n    },\n\n    unprojectVector2(out, input) {\n      tmp3[0] = input.x;\n      tmp3[1] = input.y;\n      tmp3[2] = 0;\n      unproject(tmp3, tmp3, invOrtho, 0, 0, viewportWidth, viewportHeight);\n      out.set(tmp3[0], tmp3[1]);\n    },\n\n    resize(newWidth, newHeight, newVWidth, newVHeight) {\n      width = newWidth;\n      height = newHeight;\n      newVWidth && (viewportWidth = newVWidth);\n      newVHeight && (viewportHeight = newVHeight);\n      update();\n    }\n\n  };\n});","map":{"version":3,"names":["mat4","unproject","Vector2","width","height","viewportWidth","viewportHeight","combined","create","transform","invOrtho","zoom","lookAtMatrix","position","NEAR","FAR","tmp3","eye","center","up","update","ortho","x","y","identity","lookAt","mul","invert","getPosition","zoomTo","scale","translate","setMatrix","mat","copy","setYUp","yUp","setPosition","set","unprojectVector2","out","input","resize","newWidth","newHeight","newVWidth","newVHeight"],"sources":["D:/projects/test-game/node_modules/gdxjs/lib/orthoCamera.js"],"sourcesContent":["import { mat4 } from 'gl-matrix';\nimport { unproject } from 'gdxjs/lib/mathUtils';\nimport Vector2 from './Vector2';\nexport default ((width, height, viewportWidth, viewportHeight) => {\n  const combined = mat4.create();\n  const transform = mat4.create();\n  const invOrtho = mat4.create();\n  const zoom = mat4.create();\n  const lookAtMatrix = mat4.create();\n  const position = new Vector2(0, 0);\n  const NEAR = 0;\n  const FAR = 1;\n  const tmp3 = [0, 0, 0];\n  const eye = [0, 0, FAR];\n  const center = [0, 0, NEAR];\n  const up = [0, 1, 0];\n\n  const update = () => {\n    mat4.ortho(combined, 0, width, height, 0, NEAR, FAR);\n    const x = position.x;\n    const y = position.y;\n    eye[0] = center[0] = x;\n    eye[1] = center[1] = y;\n    mat4.identity(transform);\n    mat4.lookAt(lookAtMatrix, eye, center, up);\n    mat4.mul(transform, transform, lookAtMatrix);\n    mat4.mul(transform, transform, zoom);\n    mat4.mul(combined, combined, transform);\n    mat4.invert(invOrtho, combined);\n  };\n\n  update();\n  return {\n    combined,\n\n    getPosition() {\n      return position;\n    },\n\n    zoomTo(x, y, scale) {\n      mat4.translate(zoom, zoom, [x, y, 0]);\n      mat4.scale(zoom, zoom, [scale, scale, 1]);\n      mat4.translate(zoom, zoom, [-x, -y, 0]);\n      update();\n    },\n\n    setMatrix(mat) {\n      mat4.copy(combined, mat);\n      mat4.invert(invOrtho, combined);\n    },\n\n    setYUp(yUp) {\n      if (yUp) {\n        up[1] = -1;\n      } else {\n        up[1] = 1;\n      }\n\n      update();\n    },\n\n    setPosition(x, y) {\n      position.set(x, y);\n      update();\n    },\n\n    unprojectVector2(out, input) {\n      tmp3[0] = input.x;\n      tmp3[1] = input.y;\n      tmp3[2] = 0;\n      unproject(tmp3, tmp3, invOrtho, 0, 0, viewportWidth, viewportHeight);\n      out.set(tmp3[0], tmp3[1]);\n    },\n\n    resize(newWidth, newHeight, newVWidth, newVHeight) {\n      width = newWidth;\n      height = newHeight;\n      newVWidth && (viewportWidth = newVWidth);\n      newVHeight && (viewportHeight = newVHeight);\n      update();\n    }\n\n  };\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}