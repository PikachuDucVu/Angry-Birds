{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Animation = exports.PlayMode = void 0;\nvar PlayMode;\n\n(function (PlayMode) {\n  PlayMode[PlayMode[\"NORMAL\"] = 0] = \"NORMAL\";\n  PlayMode[PlayMode[\"LOOP\"] = 1] = \"LOOP\";\n  PlayMode[PlayMode[\"LOOP_PINGPONG\"] = 2] = \"LOOP_PINGPONG\";\n  PlayMode[PlayMode[\"REVERSED\"] = 3] = \"REVERSED\";\n  PlayMode[PlayMode[\"LOOP_REVERSED\"] = 4] = \"LOOP_REVERSED\";\n})(PlayMode = exports.PlayMode || (exports.PlayMode = {}));\n\nclass Animation {\n  constructor(keyFrames, frameDurations) {\n    this.totalDuration = 0;\n    this.keyFrames = keyFrames;\n\n    if (!Array.isArray(frameDurations)) {\n      frameDurations = [frameDurations];\n    }\n\n    const lastDuration = frameDurations[frameDurations.length - 1] || 0;\n\n    while (frameDurations.length < keyFrames.length) {\n      frameDurations.push(lastDuration);\n    }\n\n    for (let fD of frameDurations) {\n      this.totalDuration += fD;\n    }\n\n    this.frameDurations = frameDurations;\n  }\n\n  getFrameNumber(stateTimeRemainder) {\n    let reverse = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    const {\n      frameDurations\n    } = this;\n    let fN = reverse ? frameDurations.length - 1 : 0;\n\n    while (true) {\n      stateTimeRemainder -= frameDurations[fN];\n\n      if (stateTimeRemainder < 0) {\n        break;\n      }\n\n      reverse ? fN-- : fN++;\n    }\n\n    return fN;\n  }\n\n  getKeyFrame(stateTime, mode) {\n    const {\n      keyFrames,\n      frameDurations,\n      totalDuration\n    } = this;\n    const runIndex = Math.floor(stateTime / totalDuration);\n    const stateTimeRemainder = stateTime % totalDuration;\n    let frameNumber = 0;\n\n    switch (mode) {\n      case PlayMode.NORMAL:\n        frameNumber = runIndex === 0 ? this.getFrameNumber(stateTimeRemainder) : frameDurations.length - 1;\n        break;\n\n      case PlayMode.LOOP:\n        frameNumber = this.getFrameNumber(stateTimeRemainder);\n        break;\n\n      case PlayMode.LOOP_PINGPONG:\n        frameNumber = this.getFrameNumber(stateTimeRemainder, runIndex % 2 === 1);\n        break;\n\n      case PlayMode.REVERSED:\n        frameNumber = runIndex === 0 ? this.getFrameNumber(stateTimeRemainder, true) : 0;\n        break;\n\n      case PlayMode.LOOP_REVERSED:\n        frameNumber = this.getFrameNumber(stateTimeRemainder, true);\n        break;\n\n      default:\n    }\n\n    return keyFrames[frameNumber];\n  }\n\n}\n\nexports.Animation = Animation;","map":{"version":3,"names":["Object","defineProperty","exports","value","Animation","PlayMode","constructor","keyFrames","frameDurations","totalDuration","Array","isArray","lastDuration","length","push","fD","getFrameNumber","stateTimeRemainder","reverse","fN","getKeyFrame","stateTime","mode","runIndex","Math","floor","frameNumber","NORMAL","LOOP","LOOP_PINGPONG","REVERSED","LOOP_REVERSED"],"sources":["D:/projects/test-game/node_modules/gdxts/dist/lib/Animation.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Animation = exports.PlayMode = void 0;\r\nvar PlayMode;\r\n(function (PlayMode) {\r\n    PlayMode[PlayMode[\"NORMAL\"] = 0] = \"NORMAL\";\r\n    PlayMode[PlayMode[\"LOOP\"] = 1] = \"LOOP\";\r\n    PlayMode[PlayMode[\"LOOP_PINGPONG\"] = 2] = \"LOOP_PINGPONG\";\r\n    PlayMode[PlayMode[\"REVERSED\"] = 3] = \"REVERSED\";\r\n    PlayMode[PlayMode[\"LOOP_REVERSED\"] = 4] = \"LOOP_REVERSED\";\r\n})(PlayMode = exports.PlayMode || (exports.PlayMode = {}));\r\nclass Animation {\r\n    constructor(keyFrames, frameDurations) {\r\n        this.totalDuration = 0;\r\n        this.keyFrames = keyFrames;\r\n        if (!Array.isArray(frameDurations)) {\r\n            frameDurations = [frameDurations];\r\n        }\r\n        const lastDuration = frameDurations[frameDurations.length - 1] || 0;\r\n        while (frameDurations.length < keyFrames.length) {\r\n            frameDurations.push(lastDuration);\r\n        }\r\n        for (let fD of frameDurations) {\r\n            this.totalDuration += fD;\r\n        }\r\n        this.frameDurations = frameDurations;\r\n    }\r\n    getFrameNumber(stateTimeRemainder, reverse = false) {\r\n        const { frameDurations } = this;\r\n        let fN = reverse ? frameDurations.length - 1 : 0;\r\n        while (true) {\r\n            stateTimeRemainder -= frameDurations[fN];\r\n            if (stateTimeRemainder < 0) {\r\n                break;\r\n            }\r\n            reverse ? fN-- : fN++;\r\n        }\r\n        return fN;\r\n    }\r\n    getKeyFrame(stateTime, mode) {\r\n        const { keyFrames, frameDurations, totalDuration } = this;\r\n        const runIndex = Math.floor(stateTime / totalDuration);\r\n        const stateTimeRemainder = stateTime % totalDuration;\r\n        let frameNumber = 0;\r\n        switch (mode) {\r\n            case PlayMode.NORMAL:\r\n                frameNumber = runIndex === 0 ? this.getFrameNumber(stateTimeRemainder) : frameDurations.length - 1;\r\n                break;\r\n            case PlayMode.LOOP:\r\n                frameNumber = this.getFrameNumber(stateTimeRemainder);\r\n                break;\r\n            case PlayMode.LOOP_PINGPONG:\r\n                frameNumber = this.getFrameNumber(stateTimeRemainder, runIndex % 2 === 1);\r\n                break;\r\n            case PlayMode.REVERSED:\r\n                frameNumber = runIndex === 0 ? this.getFrameNumber(stateTimeRemainder, true) : 0;\r\n                break;\r\n            case PlayMode.LOOP_REVERSED:\r\n                frameNumber = this.getFrameNumber(stateTimeRemainder, true);\r\n                break;\r\n            default:\r\n        }\r\n        return keyFrames[frameNumber];\r\n    }\r\n}\r\nexports.Animation = Animation;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}