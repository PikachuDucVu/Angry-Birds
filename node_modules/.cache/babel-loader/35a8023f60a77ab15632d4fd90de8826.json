{"ast":null,"code":"import _initializerDefineProperty from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";import _classCallCheck from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _applyDecoratedDescriptor from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";import _initializerWarningHelper from\"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";var _dec,_dec2,_dec3,_dec4,_class,_descriptor,_descriptor2,_descriptor3,_descriptor4;import{System,Inject}from\"flat-ecs\";export var BoxAndPigSystem=(_dec=Inject(\"levelState\"),_dec2=Inject(\"physicWorld\"),_dec3=Inject(\"boxes\"),_dec4=Inject(\"pigs\"),(_class=/*#__PURE__*/function(_System){_inherits(BoxAndPigSystem,_System);var _super=_createSuper(BoxAndPigSystem);function BoxAndPigSystem(){var _this;_classCallCheck(this,BoxAndPigSystem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_initializerDefineProperty(_this,\"levelState\",_descriptor,_assertThisInitialized(_this));_initializerDefineProperty(_this,\"physicWorld\",_descriptor2,_assertThisInitialized(_this));_initializerDefineProperty(_this,\"boxes\",_descriptor3,_assertThisInitialized(_this));_initializerDefineProperty(_this,\"pigs\",_descriptor4,_assertThisInitialized(_this));return _this;}_createClass(BoxAndPigSystem,[{key:\"process\",value:function process(){for(var i=0;i<this.pigs.length;i++){if(this.pigs[i].GetPosition().x*100>=1312){this.physicWorld.DestroyBody(this.pigs[i]);this.pigs.splice(i,1);if(this.pigs.length===0){this.levelState.conditionWin=true;}}}for(var _i=0;_i<this.boxes.length;_i++){if(typeof this.boxes[_i].GetUserData().durability===\"number\"){if(this.boxes[_i].GetUserData().durability<=4){}else{this.physicWorld.DestroyBody(this.boxes[_i]);this.boxes.splice(_i,1);}}}for(var _i2=0;_i2<this.pigs.length;_i2++){if(typeof this.pigs[_i2].GetUserData().durability===\"number\"){if(this.pigs[_i2].GetUserData().durability<=1){}else{this.physicWorld.DestroyBody(this.pigs[_i2]);this.pigs.splice(_i2,1);if(this.pigs.length===0){this.levelState.conditionWin=true;}}}}}}]);return BoxAndPigSystem;}(System),(_descriptor=_applyDecoratedDescriptor(_class.prototype,\"levelState\",[_dec],{configurable:true,enumerable:true,writable:true,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class.prototype,\"physicWorld\",[_dec2],{configurable:true,enumerable:true,writable:true,initializer:null}),_descriptor3=_applyDecoratedDescriptor(_class.prototype,\"boxes\",[_dec3],{configurable:true,enumerable:true,writable:true,initializer:null}),_descriptor4=_applyDecoratedDescriptor(_class.prototype,\"pigs\",[_dec4],{configurable:true,enumerable:true,writable:true,initializer:null})),_class));","map":{"version":3,"names":["System","Inject","BoxAndPigSystem","i","pigs","length","GetPosition","x","physicWorld","DestroyBody","splice","levelState","conditionWin","boxes","GetUserData","durability"],"sources":["D:/projects/test-game/src/system/BoxAndPigSystem.ts"],"sourcesContent":["import { b2Body, b2World } from \"box2d.ts\";\r\nimport { System, Inject } from \"flat-ecs\";\r\nimport { LevelState } from \"../data/LevelState\";\r\n\r\nexport class BoxAndPigSystem extends System {\r\n  @Inject(\"levelState\") levelState: LevelState;\r\n  @Inject(\"physicWorld\") physicWorld: b2World;\r\n  @Inject(\"boxes\") boxes: b2Body[];\r\n  @Inject(\"pigs\") pigs: b2Body[];\r\n\r\n  process(): void {\r\n    for (let i = 0; i < this.pigs.length; i++) {\r\n      if (this.pigs[i].GetPosition().x * 100 >= 1312) {\r\n        this.physicWorld.DestroyBody(this.pigs[i]);\r\n        this.pigs.splice(i, 1);\r\n        if (this.pigs.length === 0) {\r\n          this.levelState.conditionWin = true;\r\n        }\r\n      }\r\n    }\r\n    for (let i = 0; i < this.boxes.length; i++) {\r\n      if (typeof this.boxes[i].GetUserData().durability === \"number\") {\r\n        if (this.boxes[i].GetUserData().durability <= 4) {\r\n        } else {\r\n          this.physicWorld.DestroyBody(this.boxes[i]);\r\n          this.boxes.splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n    for (let i = 0; i < this.pigs.length; i++) {\r\n      if (typeof this.pigs[i].GetUserData().durability === \"number\") {\r\n        if (this.pigs[i].GetUserData().durability <= 1) {\r\n        } else {\r\n          this.physicWorld.DestroyBody(this.pigs[i]);\r\n          this.pigs.splice(i, 1);\r\n          if (this.pigs.length === 0) {\r\n            this.levelState.conditionWin = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"mappings":"i/BACA,OAASA,MAAT,CAAiBC,MAAjB,KAA+B,UAA/B,CAGA,UAAaC,gBAAb,OACGD,MAAM,CAAC,YAAD,CADT,OAEGA,MAAM,CAAC,aAAD,CAFT,OAGGA,MAAM,CAAC,OAAD,CAHT,OAIGA,MAAM,CAAC,MAAD,CAJT,yvBAME,kBAAgB,CACd,IAAK,GAAIE,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,KAAKC,IAAL,CAAUC,MAA9B,CAAsCF,CAAC,EAAvC,CAA2C,CACzC,GAAI,KAAKC,IAAL,CAAUD,CAAV,EAAaG,WAAb,GAA2BC,CAA3B,CAA+B,GAA/B,EAAsC,IAA1C,CAAgD,CAC9C,KAAKC,WAAL,CAAiBC,WAAjB,CAA6B,KAAKL,IAAL,CAAUD,CAAV,CAA7B,EACA,KAAKC,IAAL,CAAUM,MAAV,CAAiBP,CAAjB,CAAoB,CAApB,EACA,GAAI,KAAKC,IAAL,CAAUC,MAAV,GAAqB,CAAzB,CAA4B,CAC1B,KAAKM,UAAL,CAAgBC,YAAhB,CAA+B,IAA/B,CACD,CACF,CACF,CACD,IAAK,GAAIT,GAAC,CAAG,CAAb,CAAgBA,EAAC,CAAG,KAAKU,KAAL,CAAWR,MAA/B,CAAuCF,EAAC,EAAxC,CAA4C,CAC1C,GAAI,MAAO,MAAKU,KAAL,CAAWV,EAAX,EAAcW,WAAd,GAA4BC,UAAnC,GAAkD,QAAtD,CAAgE,CAC9D,GAAI,KAAKF,KAAL,CAAWV,EAAX,EAAcW,WAAd,GAA4BC,UAA5B,EAA0C,CAA9C,CAAiD,CAChD,CADD,IACO,CACL,KAAKP,WAAL,CAAiBC,WAAjB,CAA6B,KAAKI,KAAL,CAAWV,EAAX,CAA7B,EACA,KAAKU,KAAL,CAAWH,MAAX,CAAkBP,EAAlB,CAAqB,CAArB,EACD,CACF,CACF,CACD,IAAK,GAAIA,IAAC,CAAG,CAAb,CAAgBA,GAAC,CAAG,KAAKC,IAAL,CAAUC,MAA9B,CAAsCF,GAAC,EAAvC,CAA2C,CACzC,GAAI,MAAO,MAAKC,IAAL,CAAUD,GAAV,EAAaW,WAAb,GAA2BC,UAAlC,GAAiD,QAArD,CAA+D,CAC7D,GAAI,KAAKX,IAAL,CAAUD,GAAV,EAAaW,WAAb,GAA2BC,UAA3B,EAAyC,CAA7C,CAAgD,CAC/C,CADD,IACO,CACL,KAAKP,WAAL,CAAiBC,WAAjB,CAA6B,KAAKL,IAAL,CAAUD,GAAV,CAA7B,EACA,KAAKC,IAAL,CAAUM,MAAV,CAAiBP,GAAjB,CAAoB,CAApB,EACA,GAAI,KAAKC,IAAL,CAAUC,MAAV,GAAqB,CAAzB,CAA4B,CAC1B,KAAKM,UAAL,CAAgBC,YAAhB,CAA+B,IAA/B,CACD,CACF,CACF,CACF,CACF,CArCH,6BAAqCZ,MAArC"},"metadata":{},"sourceType":"module"}