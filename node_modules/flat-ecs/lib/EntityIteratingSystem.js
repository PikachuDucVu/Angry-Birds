"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.EntityIteratingSystem = void 0;
const System_1 = require("./System");
const fastbitset_1 = __importDefault(require("fastbitset"));
class EntityIteratingSystem extends System_1.System {
    constructor(types) {
        super();
        this.componentBits = new fastbitset_1.default();
        this.types = types;
    }
    setWorld(world) {
        super.setWorld(world);
        for (let type of this.types) {
            this.componentBits.add(world.getComponentIndex(type));
        }
    }
    process() {
        this.begin();
        this.world.getEntities(this.componentBits, this.processEntity.bind(this));
        this.end();
    }
    begin() { }
    end() { }
}
exports.EntityIteratingSystem = EntityIteratingSystem;
